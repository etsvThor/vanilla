(self.webpackChunkvanillaknowledge=self.webpackChunkvanillaknowledge||[]).push([[858],{99045:function(e,t,n){"use strict";n.d(t,{j:function(){return E},M:function(){return I}});var r=n(92137),a=n(6610),s=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(96156),l=n(87757),f=n.n(l),d=n(40798),m=n(99308),p=n(23279),v=n.n(p);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var h=(0,m.ZP)("@@tags"),E=function(e){(0,i.Z)(n,e);var t=g(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o)),(0,c.Z)((0,s.Z)(e),"getTagsInternal",(function(t){var a=(0,d.KP)(n.getTagsACs,(0,r.Z)(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.api.get("/tags?query=".concat(t.name));case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}),n)}))))(t);return e.dispatch(a)})),(0,c.Z)((0,s.Z)(e),"getTags",v()(e.getTagsInternal,100)),e}return n}(d.ZP);function I(){return(0,d.LO)(E)}(0,c.Z)(E,"getTagsACs",h.async("GET"))},11656:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var r=n(22122),a=n(28481),s=n(67294),i=n(14494),o=n(22964),u=n(99045);var c=n(17239);function l(e){var t=(0,s.useState)(""),n=(0,a.Z)(t,2),l=n[0],f=n[1],d=function(e){e=e.trim();var t=(0,u.M)().getTags,n=(0,i.v9)((function(t){var n;return null===(n=t.tags)||void 0===n?void 0:n.tagsByName[e]})),r=n||{},a=r.status,c=void 0===a?o.Px.PENDING:a;return r.data,(0,s.useEffect)((function(){c&&c===o.Px.PENDING&&e&&t({name:e})}),[e,c,t]),n}(l)||{},m=d.status,p=void 0===m?o.Px.LOADING:m,v=d.data,g=void 0===v?[]:v;return s.createElement(c.N,(0,r.Z)({},e,{value:e.value?e.value:[],onInputChange:f,onChange:function(t){e.onChange(t)},options:g.map((function(e){return{value:e.tagID,label:e.name,tagCode:e.urlcode}})),isLoading:!!l||[o.Px.PENDING,o.Px.LOADING].includes(p)}))}},9355:function(e,t,n){"use strict";n.d(t,{AB:function(){return o}});var r=n(87219),a=n(76983),s=n(22964),i=n(99045),o=(n(14494),(0,r.Uy)((0,a.reducerWithInitialState)({tagsByName:{}}).case(i.j.getTagsACs.started,(function(e,t){return e.tagsByName[t.name]={status:s.Px.LOADING},e})).case(i.j.getTagsACs.done,(function(e,t){return e.tagsByName[t.params.name]={status:s.Px.SUCCESS,data:t.result},e})).case(i.j.getTagsACs.failed,(function(e,t){return e.tagsByName[t.params.name]={status:s.Px.ERROR},e}))))},80146:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(6610),a=n(5991),s=n(10379),i=n(46070),o=n(77608),u=n(67294),c=n(96156),l=n(92366),f=n(71055),d=n(10389),m=n(67920),p=n(13901),v=n(35138),g=n(41033),h=n(52571),E=n(25841);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=(0,v.yI)((function(){var e=(0,g.OF)(),t=(0,p.Y7)("toast");return{root:function(){return t("box",y(y(y(y(y({},m.W.font(y({},e.fontSizeAndWeightVars("medium")))),{},{zIndex:1,position:"fixed",bottom:18,left:18,display:"inline-block"},m.W.padding({horizontal:e.gutter.size,top:e.gutter.size,bottom:e.gutter.half})),{},{margin:(0,d.dd)(e.gutter.quarter)},m.W.border()),(0,h.kL)().dropDown()),{},{background:f.w.colorOut(e.mainColors.bg),p:{margin:0}}))},buttons:t("button",y({minHeight:(0,E._)().sizing.minHeight},(0,l.flexHelper)().middleLeft())),button:t("button",y({margin:(0,d.dd)("3px")},m.W.font(y({},e.fontSizeAndWeightVars("medium")))))}})),O=n(63059),S=n(94184),b=n.n(S),P=n(26444);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,o.Z)(e);if(t){var a=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var Z=function(e){(0,s.Z)(n,e);var t=D(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.className,e.links),n=e.message,r=C();return u.createElement("div",{className:b()(r.root())},u.createElement("p",null,n),u.createElement("div",{className:r.buttons},t.map((function(e,t){return u.createElement(O.Z,{key:t,buttonType:e.type,title:e.name,className:b()(r.button),onClick:e.onClick},e.isLoading?u.createElement(P.Z,{buttonType:e.type}):e.name)}))))}}]),n}(u.Component)},12720:function(e,t,n){"use strict";n.d(t,{N:function(){return g}});var r=n(92137),a=n(28481),s=n(87757),i=n.n(s),o=n(67294),u=n(43498),c=n(80146),l=n(64833),f=n(18574),d=n(3422),m=n(22964),p=n(13819),v=n(25807);function g(){var e,t=(0,d.n)(),n=t.applyStatus,s=t.cancelStatus,g=(0,o.useState)((0,l.xZ)("themePreview",null)),h=(0,a.Z)(g,2),E=h[0],I=(h[1],(0,f.ib)()),y=I.putCurrentTheme,C=I.putPreviewTheme,O=I.patchThemeWithRevisionID,S=(0,o.useState)(!1),b=(0,a.Z)(S,2),P=b[0],D=b[1],Z=(0,o.useState)(!1),A=(0,a.Z)(Z,2),R=A[0],w=A[1],N=null!==(e=null==E?void 0:E.revisionID)&&void 0!==e&&e,x=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return");case 2:if(!N){e.next=11;break}return D(!0),e.next=6,O({themeID:E.themeID,revisionID:E.revisionID});case 6:e.sent&&(D(!1),w(!0)),C({themeID:"",revisionID:void 0,type:f.N5.APPLY}),e.next=13;break;case 11:y(E.themeID),C({themeID:"",type:f.N5.APPLY});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C({themeID:"",type:f.N5.CANCEL});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){E&&(E.name&&n.status===m.Px.SUCCESS||s.status===m.Px.SUCCESS||R)&&(window.location.href=N?"/theme/theme-settings/".concat(E.themeID,"/revisions"):E.redirect)})),E?o.createElement(c.Z,{links:[{name:N?(0,v.t)("Restore"):(0,v.t)("Apply"),type:u.q.TEXT,onClick:x,isLoading:n.status===m.Px.LOADING||n.status===m.Px.SUCCESS||P},{name:(0,v.t)("Cancel"),type:u.q.TEXT_PRIMARY,onClick:L,isLoading:s.status===m.Px.LOADING||s.status===m.Px.SUCCESS}],message:o.createElement(o.Fragment,null,"You are previewing the ",o.createElement("b",null,E.name)," theme.",n.error&&o.createElement(p.Z,{errors:[n.error]}))}):null}},3422:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},n:function(){return l}});var r=n(22964),a=n(87219),s=n(76983),i=n(18574),o=n(14494),u={applyStatus:{status:r.Px.PENDING},cancelStatus:{status:r.Px.PENDING}},c=(0,a.Uy)((0,s.reducerWithInitialState)(u).case(i.ZP.putCurrentThemeACs.started,(function(e,t){return e.applyStatus.status=r.Px.LOADING,e.applyStatus.data={themeID:t.themeID},e})).case(i.ZP.putCurrentThemeACs.done,(function(e,t){return e.applyStatus.status=r.Px.SUCCESS,e.applyStatus.error=void 0,e})).case(i.ZP.putCurrentThemeACs.failed,(function(e,t){return e.applyStatus.status=r.Px.ERROR,e.applyStatus.error=t.error,e})).case(i.ZP.putPreviewThemeACs.started,(function(e,t){return t.type===i.N5.CANCEL&&(e.cancelStatus.status=r.Px.LOADING),e.cancelStatus.data={themeID:t.themeID},e})).case(i.ZP.putPreviewThemeACs.done,(function(e,t){return t.params.type===i.N5.CANCEL&&(e.cancelStatus.status=r.Px.SUCCESS),e.cancelStatus.error=void 0,e})).case(i.ZP.putPreviewThemeACs.failed,(function(e,t){return e.cancelStatus.status=r.Px.ERROR,e.cancelStatus.error=t.error,e})));function l(){return(0,o.v9)((function(e){return e.themePreviewToaster}))}},69148:function(e,t,n){"use strict";n.d(t,{TR:function(){return de},Hx:function(){return me}});var r=n(96156),a=n(22122),s=n(28481),i=n(97133),o=n(22964),u=n(91353);function c(){return(0,u.Fs)(["profiles.view","users.add","users.edit","users.delete"])}var l=n(30758),f=n(15255),d=n(57739),m=n(92150),p=n(53554),v=n(67294),g=v.createContext({isOpen:!1,setIsOpen:function(){},triggerRef:{current:null},contentRef:{current:null},contentID:"",triggerID:""});function h(){return(0,v.useContext)(g)}var E=n(6292),I=n(28015),y=n(19459),C=n(33383),O=n(41033),S=n(67920),b=n(92366),P=n(10389),D=n(13901),Z=n(35138),A=n(71055),R=n(46457);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=(0,Z.yI)((function(e){var t=(0,D.Cg)("userCard",e),n=(0,O.OF)(),r=t("container",{spacing:n.gutter.size/2}),a=t("actionContainer",{spacing:12});return{container:r,button:t("button",{minWidth:120,mobile:{minWidth:0}}),buttonContainer:t("buttonContainer",{padding:n.gutter.half}),actionContainer:a,name:t("name",N({},n.fontSizeAndWeightVars("large","bold"))),label:t("label",{border:R.L.border({color:n.mainColors.primary,radius:3}),padding:R.L.spacing({vertical:2,horizontal:10}),font:R.L.font({color:n.mainColors.primary,size:10,transform:"uppercase"})}),containerWithBorder:t("containerWithBorder",N({color:A.w.colorOut(n.border.color)},S.W.padding({horizontal:2*r.spacing,vertical:4*r.spacing}))),count:t("count",{size:28}),header:t("header",{height:32}),date:t("date",{padding:n.gutter.size}),email:t("email",{color:A.w.colorOut(n.mainColors.fg)})}})),L=n(85819);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,Z.yI)((function(){var e=(0,D.Y7)("popupUserCard"),t=x(),n=(0,C._)().mediaQueries(),r=(0,O.OF)();(0,i.hi)({name:"104jhfg-UserCard-styles-userCardClasses",styles:"[data-reach-popover]{z-index:1051;};label:UserCard-styles-userCardClasses;"});var a=e("container",T(T({display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"center"},S.W.padding({all:t.container.spacing})),{},{flexWrap:"wrap"})),s=e("metaContainer",T({},S.W.padding({all:t.container.spacing}))),o=e("row",{display:"flex",justifyContent:"center"}),u=e("actionContainer",T({},{"&&":T(T({},S.W.padding({horizontal:t.actionContainer.spacing,top:t.container.spacing,bottom:2*t.actionContainer.spacing-t.container.spacing})),n.oneColumnDown(T({},S.W.padding({vertical:2*t.actionContainer.spacing-t.container.spacing,horizontal:t.actionContainer.spacing}))))})),c=e("containerWithBorder",{borderTop:"1px solid ".concat(t.containerWithBorder.color)}),l=e("avatar",T({},(0,I.m)())),f=e("button",T({maxWidth:(0,L.aQ)(100)},{"&&":{minWidth:(0,P.dd)(t.button.minWidth)}}),n.oneColumnDown(T({},{"&&":{width:(0,L.aQ)(100),minWidth:(0,P.dd)(t.button.mobile.minWidth)}}))),d=e("buttonContainer",T({maxWidth:(0,L.aQ)(100)},S.W.padding({all:t.container.spacing})),n.oneColumnDown(T({},{"&&":{flexGrow:1,flexBasis:(0,L.aQ)(50)}}))),m=e("name",{margin:"auto",fontSize:t.name.size,fontWeight:t.name.weight,width:(0,L.aQ)(100),textAlign:"center"},n.oneColumnDown({fontSize:1.25*t.name.size})),p=e("label",T(T(T(T({},S.W.padding(t.label.padding)),S.W.font(t.label.font)),S.W.border(t.label.border)),S.W.margin({top:t.container.spacing,horizontal:"auto"}))),v=e("stat",{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,maxWidth:(0,L.aQ)(50)}),g=e("statLabel",T(T({marginTop:(0,P.dd)(2),marginBottom:(0,P.dd)(3)},S.W.font(T(T({},r.fontSizeAndWeightVars("small")),{},{lineHeight:r.lineHeights.condensed}))),n.oneColumnDown(T({},S.W.font(T(T({},r.fontSizeAndWeightVars("medium")),{},{lineHeight:r.lineHeights.condensed})))))),h=e("statLeft",T({borderRight:(0,b.singleBorder)({})},S.W.padding({vertical:t.container.spacing,right:r.spacer.size/2,left:r.spacer.size}))),E=e("statRight",T({},S.W.padding({vertical:t.container.spacing,right:r.spacer.size,left:r.spacer.size/2}))),Z=e("count",T({marginTop:(0,P.dd)(3)},S.W.font({size:t.count.size,lineHeight:r.lineHeights.condensed}))),A=e("header",{position:"relative",height:(0,P.dd)(t.header.height)}),R=e("section",{}),w=S.W.clickable.itemState({default:r.mainColors.fg}),N=e("email",T(T({},w),{},{"&&":T(T({},S.W.font(T(T({},r.fontSizeAndWeightVars("small")),{},{align:"center"}))),{},{display:"inline-flex",margin:"auto",marginTop:(0,P.dd)(1.8*t.container.spacing)})})),U=(0,i.iv)({name:"12451uj-UserCard-styles-metas",styles:"text-align:center;label:UserCard-styles-metas;"}),_=(0,y.Gv)(),j=e("close",T({},{"&&&":T(T({},S.W.absolute.topRight()),{},{width:(0,P.dd)(_.sizing.height),height:(0,P.dd)(_.sizing.height)},n.oneColumnDown({height:(0,P.dd)(_.sizing.height)}))})),G=e("userPhoto",{margin:"auto",display:"block"}),B=e("link",T({color:"inherit",fontSize:"inherit"},{"&.isLoading":T({cursor:(0,L.ef)("wait")},(0,b.pointerEvents)("auto"))})),k=e("msg",T({fontSize:r.fonts.size.small},S.W.margin({top:(0,b.bf)(4),bottom:(0,b.bf)(4)}))),W=e("msgMinimal",T({fontSize:r.fonts.size.small},S.W.margin({top:(0,b.bf)(10),bottom:(0,b.bf)(14)})));return{container:a,containerWithBorder:c,button:f,buttonContainer:d,name:m,label:p,stat:v,count:Z,avatar:l,header:A,section:R,email:N,statLabel:g,statLeft:h,statRight:E,close:j,userPhoto:G,actionContainer:u,link:B,metaContainer:s,row:o,metas:U,msg:k,msgMinimal:W}})),j=n(63059),G=n(43498),B=n(48670),k=n(43606),W=n(29135),z=n(54894),M=n(61525),F=n(64833),V=n(94184),H=n.n(V),X=n(37442),K=n(17225),Q="This user has been banned.",q="Banned";function J(e){var t,n,r,a=_(),s=e.user,i=(0,d.Fy)(),o=i===d.uv.MOBILE||i===d.uv.XS,c=o?B.pz.XLARGE:B.pz.LARGE,l=(0,F.xZ)("context.conversationsEnabled",!1),f=null!==(t=s.title)&&void 0!==t?t:s.label,m=null!==(n=null==s?void 0:s.private)&&void 0!==n&&n,p=(0,u.Fs)("personalInfo.view"),g=null!==(r=null==s?void 0:s.banned)&&void 0!==r?r:0,h=1===g,E=(0,F.xZ)("ui.bannedPrivateProfile","0");E=""===E?"0":"1";var I=h&&"0"!==E;return f=h?(0,F.t)(q):f,!m&&!I||p?v.createElement(v.Fragment,null,v.createElement("div",{className:a.header},o&&v.createElement(j.Z,{className:a.close,onClick:e.onClose,buttonType:G.q.ICON},v.createElement(v.Fragment,null,v.createElement(k.e9,null),v.createElement(W.Z,null,(0,F.t)("Close"))))),v.createElement(B.cy,{userInfo:s,size:c,className:a.userPhoto}),v.createElement("div",{className:a.metaContainer},v.createElement("div",{className:a.row},v.createElement("div",{className:a.name},s.name)),f&&v.createElement("div",{className:a.row},f?v.createElement("div",{className:a.label,dangerouslySetInnerHTML:{__html:f}}):null),s.email&&v.createElement(u.ZP,{permission:"personalInfo.view"},v.createElement("div",{className:a.row},v.createElement("a",{className:a.email,href:"mailto:".concat(s.email)},s.email)))),h&&v.createElement("div",{className:H()(a.row,a.msg)},v.createElement("div",null,(0,F.t)(Q))),v.createElement("div",{className:H()(a.container,a.actionContainer)},v.createElement(te,{to:(0,F.tI)(s.name)},(0,F.t)("View Profile")),v.createElement(u.ZP,{permission:"conversations.add"},l&&!g&&v.createElement(te,{to:"/messages/add/".concat(s.name)},(0,F.t)("Message")))),v.createElement(ae,{borderTop:!0},v.createElement(re,{count:s.countDiscussions,text:(0,F.t)("Discussions"),position:"left"}),v.createElement(re,{count:s.countComments,text:(0,F.t)("Comments"),position:"right"})),v.createElement(ae,{borderTop:!0},v.createElement(z.HX,{className:a.metas},v.createElement(z.y1,null,(0,F.t)("Joined"),": ",v.createElement(K.Z,{timestamp:s.dateInserted})),s.dateLastActive&&v.createElement(z.y1,null,(0,F.t)("Last Active"),": ",v.createElement(K.Z,{timestamp:s.dateLastActive}))))):v.createElement($,{user:s,onClose:e.onClose})}function Y(e){var t,n=e.userFragment,r=(0,d.Fy)(),a=r===d.uv.MOBILE||r===d.uv.XS,s=a?B.pz.XLARGE:B.pz.LARGE,i=(0,F.xZ)("context.conversationsEnabled",!1),o=_();return v.createElement(v.Fragment,null,v.createElement("div",{className:o.header},a&&v.createElement(j.Z,{className:o.close,onClick:e.onClose,buttonType:G.q.ICON},v.createElement(v.Fragment,null,v.createElement(k.e9,null),v.createElement(W.Z,null,(0,F.t)("Close"))))),null!=n&&n.photoUrl?v.createElement(B.cy,{userInfo:n,size:s,className:o.userPhoto}):v.createElement(B.fP,{size:s,className:o.userPhoto}),v.createElement("div",{className:o.metaContainer},v.createElement("div",{className:o.row},v.createElement("div",{className:o.name},null!==(t=null==n?void 0:n.name)&&void 0!==t?t:v.createElement(X.ZM,{inline:!0,height:12,width:60}))),v.createElement(u.ZP,{permission:"personalInfo.view",mode:u.R9.GLOBAL},v.createElement("div",{className:o.row},v.createElement("span",{className:o.email},v.createElement(X.ZM,{inline:!0,height:12,width:120}))))),v.createElement("div",{className:H()(o.container,o.actionContainer)},v.createElement(te,{disabled:!(null!=n&&n.name),to:null!=n&&n.name?(0,F.tI)(null==n?void 0:n.name):""},(0,F.t)("View Profile")),v.createElement(u.ZP,{permission:"conversations.add"},i&&v.createElement(te,{disabled:!(null!=n&&n.name),to:"/messages/add/".concat(null==n?void 0:n.name)},(0,F.t)("Message")))),v.createElement(ae,{borderTop:!0},v.createElement(ne,{text:(0,F.t)("Discussions"),position:"left"}),v.createElement(ne,{text:(0,F.t)("Comments"),position:"right"})),v.createElement(ae,{borderTop:!0},v.createElement(z.HX,{className:o.metas},v.createElement(z.y1,null,(0,F.t)("Joined"),": ",v.createElement(X.ZM,{inline:!0,height:8,width:60})),v.createElement(z.y1,null,(0,F.t)("Last Active"),": ",v.createElement(X.ZM,{inline:!0,height:8,width:60})))))}function $(e){var t,n,r,a=e.user,s=e.userFragment,i=_(),o=(0,d.Fy)(),u=o===d.uv.MOBILE||o===d.uv.XS?B.pz.XLARGE:B.pz.LARGE,c=1===(null!==(t=null!==(n=null==a?void 0:a.banned)&&void 0!==n?n:null==s?void 0:s.banned)&&void 0!==t?t:0),l=c?(0,F.t)(q):(0,F.t)("Private"),f=c?(0,F.t)(Q):(0,F.t)("This user's profile is private."),m=null!==(r=null==a?void 0:a.name)&&void 0!==r?r:null==s?void 0:s.name,p=null!=a?a:s;return v.createElement(v.Fragment,null,v.createElement("div",{className:i.header}),v.createElement(B.cy,{userInfo:p,size:u,className:i.userPhoto}),v.createElement("div",{className:i.metaContainer},v.createElement("div",{className:i.row},v.createElement("div",{className:i.name},m)),v.createElement("div",{className:i.row},v.createElement("div",{className:i.label},l)),v.createElement("div",{className:H()(i.row,i.msgMinimal)},v.createElement("div",null,f))))}function ee(e){var t=_(),n=(0,d.Fy)(),r=n===d.uv.MOBILE||n===d.uv.XS?B.pz.XLARGE:B.pz.LARGE,a={photoUrl:(0,F.CN)("/applications/dashboard/design/images/banned.png",!0)},s=e.error?e.error:"This user has been deleted.",i=e.error?(0,F.t)("ERROR"):(0,F.t)("DELETED");return v.createElement(v.Fragment,null,v.createElement("div",{className:t.header}),v.createElement(B.cy,{userInfo:a,size:r,className:t.userPhoto}),v.createElement("div",{className:t.metaContainer},v.createElement("div",{className:t.row},v.createElement("div",{className:t.label},i)),v.createElement("div",{className:H()(t.row,t.msgMinimal)},v.createElement("div",null,s))))}function te(e){var t=_();return v.createElement("div",{className:t.buttonContainer},v.createElement(M.Z,{disabled:e.disabled,to:e.to,buttonType:G.q.STANDARD,className:t.button},e.children))}function ne(e){var t,n=_(),a=e.text,s=e.position;return v.createElement("div",{className:H()(n.stat,(t={},(0,r.Z)(t,n.statLeft,"left"===s),(0,r.Z)(t,n.statRight,"right"===s),t))},v.createElement("div",{className:n.count},v.createElement(X.ZM,{height:27,width:48})),v.createElement("div",{className:n.statLabel},a))}function re(e){var t,n=_(),a=e.count,s=e.text,i=e.position;return v.createElement("div",{className:H()(n.stat,(t={},(0,r.Z)(t,n.statLeft,"left"===i),(0,r.Z)(t,n.statRight,"right"===i),t))},v.createElement("div",{className:n.count},v.createElement(E.ZP,{fallbackTag:"div",value:a||0})),v.createElement("div",{className:n.statLabel},s))}function ae(e){var t=e.borderTop,n=_();return v.createElement("div",{className:H()(n.container,(0,r.Z)({},n.containerWithBorder,t))},e.children)}var se=n(98674),ie=n(51856),oe=n(25807),ue=n(51467);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){return c()?e.user?v.createElement(J,{user:e.user,onClose:e.onClose}):v.createElement(ge,e):v.createElement(v.Fragment,null)}function de(e){var t,n=(0,v.useState)(!1),r=(0,s.Z)(n,2),i=r[0],o=r[1],u=null!==(t=e.forceOpen)&&void 0!==t?t:i;function l(e){o(e),e&&window.closeAllFlyouts&&window.closeAllFlyouts()}var f=(0,se.hu)("popupTrigger"),h=f+"-content",E=(0,v.useRef)(null),I=(0,v.useRef)(null),y=(0,d.Fy)(),C=y===d.uv.MOBILE||y===d.uv.XS;return c()?v.createElement(g.Provider,{value:{isOpen:u,setIsOpen:l,triggerRef:E,contentRef:I,triggerID:f,contentID:h}},e.children,!C&&u&&v.createElement(ie.ZP,{targetRef:E,position:pe},v.createElement(ve,(0,a.Z)({},e,{onClose:function(){l(!1)}}))),C&&v.createElement(m.Z,{isVisible:u,size:p.Z.SMALL,exitHandler:function(){l(!1)}},v.createElement(fe,(0,a.Z)({},e,{onClose:function(){l(!1)}})))):v.createElement(v.Fragment,null,e.children)}function me(){var e=h(),t=(0,v.useCallback)((function(t,n){var r;t||n===e.contentRef.current||null!==(r=e.contentRef.current)&&void 0!==r&&r.contains(n)||e.setIsOpen(!1)}),[e.setIsOpen,e.contentRef]);return(0,ue.LJ)(e.triggerRef,t),{props:c()?{"aria-controls":e.contentID,"aria-expanded":e.isOpen,"aria-haspopup":e.isOpen,role:"button",onClick:function(t){t.preventDefault(),e.setIsOpen(!e.isOpen)},onKeyPress:function(t){var n;(" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e.setIsOpen(!e.isOpen)),"Escape"===t.key)&&(t.preventDefault(),e.setIsOpen(!1),null===(n=e.triggerRef.current)||void 0===n||n.focus())}}:{},triggerRef:e.triggerRef,isOpen:e.isOpen}}function pe(e,t){var n,r,a,s=(0,ie.MN)(e,t),i=(null!==(n=null==t?void 0:t.width)&&void 0!==n?n:0)/2,o=(null!==(r=null==e?void 0:e.width)&&void 0!==r?r:0)/2,u=(null!==(a=null==e?void 0:e.left)&&void 0!==a?a:0)+o+window.pageXOffset-i;return u<16||u+2*i>window.innerWidth-16?s:le(le({},s),{},{left:u})}function ve(e){var t=h(),n=(0,v.useCallback)((function(e,n){n&&!e&&n!==t.triggerRef.current&&t.setIsOpen(!1)}),[t.setIsOpen,t.triggerRef]);return(0,ue.LJ)(t.contentRef,n),v.createElement("div",{ref:t.contentRef,className:(0,i.cx)((0,f.IJ)().contentsBox,"isMedium"),onKeyDown:function(e){var n;"Escape"===e.key&&(e.preventDefault(),t.setIsOpen(!1),null===(n=t.triggerRef.current)||void 0===n||n.focus())},onClick:function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},v.createElement(fe,e))}function ge(e){var t,n,r=e.userFragment,a=(0,l.aF)({userID:e.userID}),s=(0,u.Fs)("personalInfo.view"),i=(0,F.xZ)("ui.bannedPrivateProfile","0"),c="0"!==(i=""===i?"0":"1"),f=1===(null!==(t=null==r?void 0:r.banned)&&void 0!==t?t:0);return(null!=r&&r.private||c&&f)&&!s?v.createElement($,{userFragment:r,onClose:e.onClose}):a.status===o.Px.PENDING||a.status===o.Px.LOADING?v.createElement(Y,{userFragment:r,onClose:e.onClose}):a.error&&404===(null==a||null===(n=a.error)||void 0===n?void 0:n.response.status)?v.createElement(ee,{onClose:e.onClose}):a.data&&a.status!==o.Px.ERROR?v.createElement(J,{user:a.data,onClose:e.onClose}):v.createElement(ee,{error:(0,oe.t)("Failed to load user"),onClose:e.onClose})}},97771:function(e,t,n){"use strict";var r=n(6610),a=n(5991),s=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(96156),l=n(67294),f=n(64833),d=n(22964),m=n(54956),p=n(40372),v=n(22241),g=n(14494),h=n(17239);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var I=function(e){(0,i.Z)(n,e);var t=E(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,c.Z)((0,s.Z)(e),"onInputChange",(function(t){(t=t.trim())&&e.props.suggestionActions.loadUsers(t)})),e}return(0,a.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.suggestions,r=t.label;return n.status===d.Px.SUCCESS&&n.data&&(e=n.data.map((function(e){return{value:e.userID,label:e.name}}))),l.createElement(h.N,{label:r?(0,f.t)(r):(0,f.t)("Author"),options:e,isLoading:n.status===d.Px.LOADING||n.status===d.Px.PENDING,onChange:this.props.onChange,value:this.props.value,onInputChange:this.onInputChange,className:this.props.className,maxHeight:this.props.maxHeight})}}]),n}(l.Component),y=(0,g.$j)(p.Z.mapStateToProps,(function(e){return{suggestionActions:new m.Z(e,v.ZP)}}));t.Z=y(I)},91353:function(e,t,n){"use strict";n.d(t,{R9:function(){return r},ZP:function(){return c},Fs:function(){return l}});var r,a=n(28481),s=n(22964),i=n(9803),o=n(67294),u=n(50674);function c(e){var t,n;if((0,u.TE)(),!e.permission)return o.createElement(o.Fragment,null,e.children);var a=l(e.permission,{mode:null!==(t=e.mode)&&void 0!==t?t:null!=e.resourceID?r.RESOURCE_IF_JUNCTION:r.GLOBAL_OR_RESOURCE,resourceType:e.resourceType,resourceID:e.resourceID})?e.children:null!==(n=e.fallback)&&void 0!==n?n:null;return o.createElement(o.Fragment,null,a)}function l(e,t){var n=(0,i.ZP)().getState().users.permissions,o=e;if(Array.isArray(o)||(o=[o]),!n.data||n.status!==s.Px.SUCCESS)return!1;if(n.data.isAdmin)return!0;t||(t={mode:r.GLOBAL_OR_RESOURCE});var u=t,c=u.resourceID,l=u.resourceType;l||(l="global",c=null);var f=!1;if(null!=c&&null!=l){var d,m,p,v,g,h=null===(d=n.data.junctionAliases)||void 0===d?void 0:d[l];if(h)c=null!==(v=null!==(g=h[c])&&void 0!==g?g:h[c.toString()])&&void 0!==v?v:c;var E=null!==(m=null===(p=n.data.junctions)||void 0===p?void 0:p[l])&&void 0!==m?m:null;E&&(f=E.includes(c))}var I=n.data.permissions.filter((function(e){var n="global"===e.type,a=e.type===l&&e.id===c;switch(t.mode){case r.RESOURCE_IF_JUNCTION:return f?a:n;case r.GLOBAL:return n;case r.GLOBAL_OR_RESOURCE:return!0;case r.RESOURCE:return a}})),y=!1;return I.forEach((function(e){for(var t=0,n=Object.entries(e.permissions);t<n.length;t++){var r=(0,a.Z)(n[t],2),s=r[0],i=r[1];o.includes(s)&&i&&(y=!0)}})),y}!function(e){e.GLOBAL="global",e.RESOURCE="resource",e.GLOBAL_OR_RESOURCE="globalOrResource",e.RESOURCE_IF_JUNCTION="resourceIfJunction"}(r||(r={}))},68102:function(e,t,n){"use strict";n.d(t,{Z:function(){return g},_:function(){return h}});var r=n(92137),a=n(6610),s=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(96156),l=n(87757),f=n.n(l),d=n(22964),m=n(40798);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var v=(0,n(99308).Jy)("@@users"),g=function(e){(0,i.Z)(n,e);var t=p(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o)),(0,c.Z)((0,s.Z)(e),"getMe",(function(){if(e.getState().users.current.status!==d.Px.LOADING){var t=(0,m.KP)(n.getMeACs,(0,r.Z)(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.get("/users/me");case 2:return n=t.sent,t.abrupt("return",null==n?void 0:n.data);case 4:case"end":return t.stop()}}),t)}))))();return e.dispatch(t)}})),(0,c.Z)((0,s.Z)(e),"getPermissions",(function(){if(e.getState().users.permissions.status===d.Px.PENDING){var t=(0,m.KP)(n.getPermissionsACs,(0,r.Z)(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.get("/users/$me/permissions?expand=junctions");case 2:return n=t.sent,t.abrupt("return",null==n?void 0:n.data);case 4:case"end":return t.stop()}}),t)}))))();return e.dispatch(t)}})),(0,c.Z)((0,s.Z)(e),"checkCountData",(function(){var t=(new Date).getTime(),a=e.getState().users.countInformation.lastRequested;if(!(null!==a&&t<a+60)){var s=(0,m.KP)(n.getCountsACs,(0,r.Z)(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.get("/users/me-counts");case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))))();return e.dispatch(s)}})),(0,c.Z)((0,s.Z)(e),"getUserByID",(function(t){var a=t.userID,s=(0,m.KP)(n.getUserACs,(0,r.Z)(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.get("/users/".concat(a,"/?expand[]=all"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))))({userID:a});return e.dispatch(s)})),(0,c.Z)((0,s.Z)(e),"clearInviteUsers",e.bindDispatch(n.clearInviteUsersAC)),(0,c.Z)((0,s.Z)(e),"inviteUsersByGroupID",(function(t){var a=t.groupID,s={userIDs:t.userIDs,emails:t.emails},i=(0,m.KP)(n.inviteUsersACs,(0,r.Z)(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.post("/groups/".concat(a,"/invitations"),s);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))))(t);return e.dispatch(i)})),(0,c.Z)((0,s.Z)(e),"updateIDs",(function(t){var r=t.userID,a=t.IDs;e.dispatch(n.updateInviteeIDsAC({userID:r,IDs:a}))})),(0,c.Z)((0,s.Z)(e),"updateEmails",(function(t){var r=t.userID,a=t.emails;e.dispatch(n.updateInviteeEmailsAC({userID:r,emails:a}))})),(0,c.Z)((0,s.Z)(e),"updateEmailsString",(function(t){var r=t.userID,a=t.emailsString;e.dispatch(n.updateInviteeEmailsStringAC({userID:r,emailsString:a}))})),(0,c.Z)((0,s.Z)(e),"updateInvitees",(function(t){var r=t.userID,a=t.invitees;e.dispatch(n.updateInviteesAC({userID:r,invitees:a}))})),e}return n}(m.ZP);function h(){return(0,m.LO)(g)}(0,c.Z)(g,"getMeACs",v.async("GET_ME")),(0,c.Z)(g,"getPermissionsACs",v.async("GET_PERMISSIONS")),(0,c.Z)(g,"getCountsACs",v.async("GET_ME_COUNTS")),(0,c.Z)(g,"getUserACs",v.async("GET_USER")),(0,c.Z)(g,"clearInviteUsersAC",v("CLEAR_INVITE_USER")),(0,c.Z)(g,"inviteUsersACs",v.async("INVITE_USERS")),(0,c.Z)(g,"updateInviteeIDsAC",v("UPDATE_INVITEE_IDS")),(0,c.Z)(g,"updateInviteeEmailsAC",v("UPDATE_INVITEE_EMAIlS")),(0,c.Z)(g,"updateInviteeEmailsStringAC",v("UPDATE_INVITEE_EMAIlS_STRING")),(0,c.Z)(g,"updateInviteesAC",v("UPDATE_INVITEES"))},54956:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(6610),a=n(5991),s=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(96156),l=n(1454),f=n(22964),d=n(40798),m=n(40372),p=n(22241),v=n(23279),g=n.n(v);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var E=function(e){(0,i.Z)(n,e);var t=h(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,c.Z)((0,s.Z)(e),"setActive",e.bindDispatch(n.setActiveAC)),(0,c.Z)((0,s.Z)(e),"interalLoadUsers",(function(t){return e.dispatch((function(e,r){var a=m.Z.selectSuggestionsTrie(r()),s=a.getValue(t);if(null!=s)switch(s.status){case f.Px.SUCCESS:if(s.data)return e(n.loadUsersACs.response({data:s.data,status:200},{username:t}));break;case f.Px.LOADING:return;case f.Px.ERROR:if(s.error)return e(n.loadUsersACs.error(s.error,{username:t}))}var i=a.getValueFromPartialsOfWord(t);if(null!=i)switch(i.status){case f.Px.SUCCESS:if(i.data&&i.data.length<n.USER_LIMIT)return e(n.loadUsersACs.response({data:n.filterSuggestions(i.data,t),status:200},{username:t}));break;case f.Px.ERROR:case f.Px.PENDING:}e(n.loadUsersACs.request({username:t}));var o={name:t+"*",order:"mention",limit:n.USER_LIMIT};return p.ZP.get("/users/by-names/",{params:o}).then((function(r){if(r.status>=500)throw new Error(r.data);r.data=r.data.map((function(e){return e.domID="mentionSuggestion"+e.userID,e})),e(n.loadUsersACs.response(r,{username:t}))})).catch((function(r){(0,l.H)(r),e(n.loadUsersACs.error(r,{username:t}))}))}))})),(0,c.Z)((0,s.Z)(e),"loadUsers",g()(e.interalLoadUsers,50)),e}return(0,a.Z)(n,null,[{key:"setActiveAC",value:function(e,t){return d.ZP.createAction(n.SET_ACTIVE_SUGGESTION,{suggestionID:e,suggestionIndex:t})}},{key:"filterSuggestions",value:function(e,t){var n=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0});return e.filter((function(e){if(e.name.length<t.length)return!1;var r=e.name.substring(0,t.length);return 0===n.compare(r,t)}))}}]),n}(d.ZP);(0,c.Z)(E,"SET_ACTIVE_SUGGESTION","@@mentions/SET_ACTIVE_SUGGESTION"),(0,c.Z)(E,"LOAD_USERS_REQUEST","@@mentions/GET_USERS_REQUEST"),(0,c.Z)(E,"LOAD_USERS_RESPONSE","@@mentions/LOAD_USERS_RESPONSE"),(0,c.Z)(E,"LOAD_USERS_ERROR","@@mentions/LOAD_USERS_ERROR"),(0,c.Z)(E,"ACTION_TYPES",void 0),(0,c.Z)(E,"USER_LIMIT",50),(0,c.Z)(E,"loadUsersACs",d.ZP.generateApiActionCreators(E.LOAD_USERS_REQUEST,E.LOAD_USERS_RESPONSE,E.LOAD_USERS_ERROR,{},{}))},40372:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(81253),a=n(6610),s=n(5991),i=n(96156),o=n(22964),u=function(){function e(){(0,a.Z)(this,e),(0,i.Z)(this,"MAX_PARTIAL_LOOKUP_ITERATIONS",10),(0,i.Z)(this,"root",{})}return(0,s.Z)(e,[{key:"insert",value:function(e,t){for(var n=this.root,r=0;r<e.length;r++){var a=e[r];if(n.children||(n.children={}),!(a in n.children)){var s=r!==e.length-1?{}:{children:{}};n.children[a]=s}n=n.children[a]}n.value=t}},{key:"getNode",value:function(e){var t=this.root;if(void 0===e)return t;for(var n=0;n<e.length;n++){var r=e.charAt(n);if(!t.children||!t.children[r])return null;t=t.children[r]}return t}},{key:"getValue",value:function(e){var t=this.getNode(e);return t&&t.value||null}},{key:"getValueFromPartialsOfWord",value:function(e){for(var t=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);t>0;t--){var n=e.substring(0,t),r=this.getValue(n);if(null!=r)return r}return null}}]),e}(),c=n(54956),l=n(18560);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw s}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){function e(){var t=this;(0,a.Z)(this,e),(0,i.Z)(this,"initialState",{lastSuccessfulUsername:null,currentUsername:null,trie:new u,activeSuggestionID:"",activeSuggestionIndex:0}),(0,i.Z)(this,"reducer",(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case c.Z.LOAD_USERS_REQUEST:var a=r.meta.username;n.trie.insert(a,{status:o.Px.LOADING});var s=!1,i=n.lastSuccessfulUsername;if(null!=i&&a.length>=i.length){var u=a.substring(0,i.length);u===i&&(s=!0)}return p(p({},n),{},{currentUsername:a,lastSuccessfulUsername:s?n.lastSuccessfulUsername:null});case c.Z.LOAD_USERS_ERROR:var l=r.payload,f=r.meta.username;return n.trie.insert(f,{status:o.Px.ERROR,data:void 0,error:l}),n;case c.Z.LOAD_USERS_RESPONSE:var d=r.payload.data,m=r.meta.username;n.trie.insert(m,{status:o.Px.SUCCESS,data:e.sortSuggestions(d,m)});var v=d.length>0?d[0].domID:"";return p(p({},n),{},{activeSuggestionID:v,activeSuggestionIndex:0,lastSuccessfulUsername:m,currentUsername:m});case c.Z.SET_ACTIVE_SUGGESTION:var g=r.payload,h=g.suggestionID,E=g.suggestionIndex;return p(p({},n),{},{activeSuggestionID:h,activeSuggestionIndex:E});default:return n}}))}return(0,s.Z)(e,null,[{key:"mapStateToProps",value:function(t){var n=p({},e.stateSlice(t)),a=n.trie,s=(0,r.Z)(n,["trie"]),i=n.lastSuccessfulUsername&&a.getValue(n.lastSuccessfulUsername)||e.defaultSuggestions,u=n.currentUsername&&a.getValue(n.currentUsername),c=!!u&&u.status===o.Px.LOADING;return p(p({},s),{},{suggestions:i,isLoading:c})}},{key:"selectSuggestionsTrie",value:function(t){return e.stateSlice(t).trie}},{key:"stateSlice",value:function(e){if(!e.users||!e.users.suggestions)throw new Error("Could not find users.suggestions in state ".concat(e,". Be sure to initialize the usersReducer()"));return e.users.suggestions}},{key:"sortSuggestions",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0}),s=90,i=[],o=[],u=(0,l.mM)(r,s),c=f(e);try{for(c.s();!(n=c.n()).done;){var d=n.value;if(d.dateLastActive){var m=d.dateLastActive?new Date(d.dateLastActive):new Date;(0,l.LY)(m,u)?i.push(d):o.push(d)}else o.push(d)}}catch(e){c.e(e)}finally{c.f()}var p=function(e,n){var r=t.toLocaleLowerCase(),s=e.name.toLocaleLowerCase(),i=n.name.toLocaleLowerCase();return s.startsWith(r)&&!i.startsWith(r)?-1:i.startsWith(r)&&!s.startsWith(r)?1:a.compare(e.name.toLocaleLowerCase(),n.name.toLocaleLowerCase())},v=function(e,n){var r=t.toLocaleLowerCase();return e.name.toLocaleLowerCase()===r?-1:0};i.sort(p),o.sort(p);var g=[].concat(i,o);return g.sort(v),g}}]),e}();(0,i.Z)(v,"defaultSuggestions",{status:o.Px.PENDING})},30758:function(e,t,n){"use strict";n.d(t,{aF:function(){return o}});var r=n(14494),a=n(68102),s=n(67294),i=n(22964);n(50674);function o(e){var t=(0,a._)(),n=e.userID,o=(0,r.v9)((function(e){var t;return null!==(t=e.users.usersByID[n])&&void 0!==t?t:{status:i.Px.PENDING}})),u=o.status;return(0,s.useEffect)((function(){i.Px.PENDING.includes(u)&&t.getUserByID(e)}),[u,t,e]),(0,s.useDebugValue)(o),o}},50674:function(e,t,n){"use strict";n.d(t,{$m:function(){return I},cA:function(){return y},KQ:function(){return C},eu:function(){return O},TE:function(){return S}});var r=n(85061),a=n(96156),s=n(22964),i=n(40372),o=n(68102),u=n(87219),c=n(76983),l=n(82562),f=n(14494),d=n(67294),m=n(66678),p=n.n(m);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(new i.Z).reducer,E={current:{status:s.Px.PENDING},permissions:{status:s.Px.PENDING},countInformation:{counts:[],lastRequested:null},suggestions:h(void 0,""),usersByID:{},usersInvitationsByID:{}};function I(e){return e&&0===e.userID}var y=(0,u.ZP)((0,c.reducerWithInitialState)(p()(E)).case(o.Z.getMeACs.started,(function(e){return e.current.status=s.Px.LOADING,e})).case(o.Z.getMeACs.done,(function(e,t){return e.current.data=t.result,e.current.status=s.Px.SUCCESS,e})).case(o.Z.getMeACs.failed,(function(e,t){return e.current.status=s.Px.ERROR,e.current.error=t.error,e})).case(o.Z.getPermissionsACs.started,(function(e){return e.permissions.status=s.Px.LOADING,e})).case(o.Z.getPermissionsACs.done,(function(e,t){return e.permissions.data=t.result,e.permissions.status=s.Px.SUCCESS,e})).case(o.Z.getPermissionsACs.failed,(function(e,t){return e.permissions.status=s.Px.ERROR,e.permissions.error=t.error,e})).case(o.Z.getCountsACs.started,(function(e){return e.countInformation.lastRequested=(new Date).getTime(),e})).case(o.Z.getCountsACs.done,(function(e,t){return e.countInformation.counts=t.result.counts,e})).case(o.Z.getUserACs.started,(function(e,t){var n=t.userID;return e.usersByID[n]={status:s.Px.LOADING},e})).case(o.Z.getUserACs.done,(function(e,t){var n=t.params.userID;return e.usersByID[n]={data:t.result,status:s.Px.SUCCESS},e})).case(o.Z.getUserACs.failed,(function(e,t){var n=t.params.userID;return e.usersByID[n]={status:s.Px.ERROR,error:t.error},e})).case(o.Z.inviteUsersACs.started,(function(e,t){var n=t.userID;return e.usersInvitationsByID[n].results={status:s.Px.LOADING},e})).case(o.Z.inviteUsersACs.done,(function(e,t){var n=t.params.userID;return e.usersInvitationsByID[n].results={status:s.Px.SUCCESS,data:t.result},e.usersInvitationsByID[n].emailsString="",e.usersInvitationsByID[n].invitees=[],e})).case(o.Z.clearInviteUsersAC,(function(e,t){var n=t.userID;return delete e.usersInvitationsByID[n],e})).case(o.Z.inviteUsersACs.failed,(function(e,t){var n=t.params.userID;return e.usersInvitationsByID[n].results={status:s.Px.ERROR,error:t.error},e})).case(o.Z.updateInviteeIDsAC,(function(e,t){var n,a,s=t.userID,i=t.IDs;return e.usersInvitationsByID[s]=g(g({},e.usersInvitationsByID[s]),{},{userIDs:[].concat((0,r.Z)(null!==(n=null===(a=e.usersInvitationsByID[s])||void 0===a?void 0:a.userIDs)&&void 0!==n?n:[]),(0,r.Z)(i))}),e})).case(o.Z.updateInviteesAC,(function(e,t){var n=t.userID,r=t.invitees;return e.usersInvitationsByID[n]=g(g({},e.usersInvitationsByID[n]),{},{invitees:r}),e})).case(o.Z.updateInviteeEmailsAC,(function(e,t){var n,a,s=t.userID,i=t.emails;return e.usersInvitationsByID[s]=g(g({},e.usersInvitationsByID[s]),{},{emails:[].concat((0,r.Z)(null!==(n=null===(a=e.usersInvitationsByID[s])||void 0===a?void 0:a.emails)&&void 0!==n?n:[]),(0,r.Z)(i))}),e})).case(o.Z.updateInviteeEmailsStringAC,(function(e,t){var n=t.userID,r=t.emailsString;return e.usersInvitationsByID[n]=g(g({},e.usersInvitationsByID[n]),{},{emailsString:r}),e})).default((function(e,t){return t.type===l.Z.MARK_ALL_READ_RESPONSE&&e.current.data&&(e.current.data.countUnreadNotifications=0),e.suggestions=h(e.suggestions,t),e})));function C(e){if(!e.users||!e.users.current)throw new Error('It seems you did not initialize the users model correctly. Could not find "users.current" in state: '.concat(e));return{currentUser:e.users.current}}function O(){return(0,f.v9)(C)}function S(){var e=(0,f.v9)((function(e){return e.users.permissions})),t=(0,o._)().getPermissions,n=e.status;return(0,d.useEffect)((function(){[s.Px.PENDING,s.Px.LOADING].includes(n)&&t()}),[n,t]),e}}}]);