(self.webpackChunkvanillaknowledge=self.webpackChunkvanillaknowledge||[]).push([[925],{17070:function(e,t,n){"use strict";n.r(t),n.d(t,{MODAL_CONTAINER_ID:function(){return g},PAGE_CONTAINER_ID:function(){return S},default:function(){return I},mountModal:function(){return M}});var s=n(6610),o=n(5991),i=n(63349),a=n(10379),r=n(46070),l=n(77608),c=n(96156),u=n(22122),d=n(28481),f=n(53554),p=n(40792),h=n(98674),m=n(94184),E=n.n(m),D=n(67294),v=n(17606),y=n(61802),Z=n(51467),L=n(30340);function A(e){var t=e.titleID,n=e.label,s=e.size,o=e.isVisible,i=e.onDestroyed,a=(0,D.useState)(!1),r=(0,d.Z)(a,2),l=r[0],c=r[1],m=(0,L.tv)(),A=(0,Z.xy)(o);(0,D.useLayoutEffect)((function(){A&&!o?(c(!0),m.setIsForcedOpen(!1)):!A&&o&&m.setIsForcedOpen(!0)}),[o,A]);var _=(0,D.useCallback)((function(){c(!1),i()}),[i]),b=(0,D.useMemo)((function(){return(0,h.qC)("modal")}),[])+"-description",k=(0,D.useRef)(null),g=e.modalRef||k,S=(0,p.W)(),M=D.createElement(D.Fragment,null,e.description&&D.createElement("div",{id:b,className:"sr-only"},e.description),e.children);e.scrollable&&(M=D.createElement(v.in,null,D.createElement("div",{className:S.scroll},M)));var I=(0,D.useMemo)((function(){switch(s){case f.Z.SMALL:case f.Z.MEDIUM:case f.Z.LARGE:case f.Z.XL:return{xPercent:-50,yPercent:-50};default:return}}),[s]),P=function(){switch(e.size){case f.Z.SMALL:case f.Z.MEDIUM:case f.Z.LARGE:return{fade:!0,fromDirection:y.a.BOTTOM,halfDirection:!0};case f.Z.XL:return{fade:!0};case f.Z.FULL_SCREEN:return{fade:!1};case f.Z.MODAL_AS_DROP_DOWN:return{fade:!1,fromDirection:y.a.TOP};case f.Z.MODAL_AS_SIDE_PANEL_RIGHT:case f.Z.MODAL_AS_SIDE_PANEL_RIGHT_LARGE:return{fade:!1,fromDirection:y.a.RIGHT};case f.Z.MODAL_AS_SIDE_PANEL_LEFT:return{fade:!1,fromDirection:y.a.LEFT}}}();return D.createElement("div",{onKeyPress:e.onKeyPress},D.createElement(y.k,{fade:!0,isEntered:e.isVisible,className:S.overlayScrim,onDestroyed:_},D.createElement("span",null)),D.createElement(v.ZP,{isActive:e.isVisible||A||l},D.createElement("div",{className:S.overlayContent,onClick:e.onOverlayClick,style:{pointerEvents:e.isVisible?"initial":"none"}},D.createElement(y.k,(0,u.Z)({id:e.id},P,{targetTransform:I,isEntered:e.isVisible,role:"dialog","aria-modal":!0,className:E()(S.root,{isFullScreen:s===f.Z.FULL_SCREEN||s===f.Z.MODAL_AS_SIDE_PANEL_RIGHT||s===f.Z.MODAL_AS_SIDE_PANEL_LEFT,isSidePanelRight:s===f.Z.MODAL_AS_SIDE_PANEL_RIGHT,isSidePanelRightLarge:s===f.Z.MODAL_AS_SIDE_PANEL_RIGHT_LARGE,isSidePanelLeft:s===f.Z.MODAL_AS_SIDE_PANEL_LEFT,isDropDown:s===f.Z.MODAL_AS_DROP_DOWN,isXL:s===f.Z.XL,isLarge:s===f.Z.LARGE,isMedium:s===f.Z.MEDIUM,isSmall:s===f.Z.SMALL,isShadowed:s===f.Z.LARGE||f.Z.MEDIUM||f.Z.SMALL},e.className),ref:g,onKeyDown:e.onKeyDown,onClick:e.onModalClick,"aria-label":n,"aria-labelledby":t,"aria-describedby":e.description?b:void 0}),M))))}var _=n(1454),b=n(94370);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return(0,r.Z)(this,n)}}var g="modals",S="page";function M(e){return(0,Z.t_)(e,g)}var I=function(e){(0,a.Z)(n,e);var t=k(n);function n(){var e;(0,s.Z)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,i.Z)(e),"closeFocusElement",null),(0,c.Z)((0,i.Z)(e),"selfRef",D.createRef()),(0,c.Z)((0,i.Z)(e),"state",{wasDestroyed:!e.props.isVisible}),(0,c.Z)((0,i.Z)(e),"onMountIn",(function(){var t=e.getPageContainer();e.setCloseFocusElement(),e.focusInitialElement(),t&&t.setAttribute("aria-hidden",!0),0===n.stack.length&&document.addEventListener("keydown",e.handleDocumentEscapePress),n.stack.push((0,i.Z)(e))})),(0,c.Z)((0,i.Z)(e),"handleDestroyed",(function(){var t;e.setState({wasDestroyed:!0});var s=e.getPageContainer();n.stack.pop(),0===n.stack.length?(s&&s.removeAttribute("aria-hidden"),document.removeEventListener("keydown",e.handleDocumentEscapePress)):s&&s.setAttribute("aria-hidden",!0),null===(t=e.closeFocusElement)||void 0===t||t.focus()})),(0,c.Z)((0,i.Z)(e),"handleTabbing",(function(t){t.shiftKey&&9===t.keyCode?e.handleShiftTab(t):t.shiftKey||9!==t.keyCode||e.handleTab(t)})),(0,c.Z)((0,i.Z)(e),"handleDocumentEscapePress",(function(t){var s=n.stack[n.stack.length-1];if("keyCode"in t&&27===t.keyCode){if(t.preventDefault(),t.stopPropagation(),1===n.stack.length&&e.props.isWholePage)return;s.props.exitHandler&&s.props.exitHandler(t)}})),(0,c.Z)((0,i.Z)(e),"handleModalClick",(function(e){e.stopPropagation()})),(0,c.Z)((0,i.Z)(e),"handleScrimClick",(function(t){t.preventDefault(),e.props.exitHandler&&e.props.exitHandler(t)})),e}return(0,o.Z)(n,[{key:"render",value:function(){return this.state.wasDestroyed?null:(0,Z.t_)(D.createElement(D.Fragment,null,D.createElement(A,{id:this.props.id,className:this.props.className,onDestroyed:this.handleDestroyed,scrollable:this.props.scrollable,onKeyDown:this.handleTabbing,onModalClick:this.handleModalClick,onOverlayClick:this.handleScrimClick,description:this.props.description,size:this.props.size,modalRef:this.selfRef,titleID:"titleID"in this.props?this.props.titleID:void 0,label:"label"in this.props?this.props.label:void 0,isVisible:this.props.isVisible,onKeyPress:this.props.onKeyPress},this.props.children),this.props.afterContent),g,!0)}},{key:"tabHandler",get:function(){return this.selfRef.current?new b.yE(this.selfRef.current):null}},{key:"componentDidMount",value:function(){this.getPageContainer()||(0,_.KE)('\nA modal was mounted, but the page container could not be found.\nPlease wrap your primary content area with the ID "'.concat(S,'" so it can be hidden to screenreaders.\n            '))}},{key:"componentDidUpdate",value:function(e,t){this.props.elementToFocusOnExit!==e.elementToFocusOnExit&&this.setCloseFocusElement(),t.wasDestroyed&&!this.state.wasDestroyed&&this.onMountIn(),!e.isVisible&&this.props.isVisible&&this.setState({wasDestroyed:!1})}},{key:"getPageContainer",value:function(){return document.getElementById(S)}},{key:"focusInitialElement",value:function(){var e,t=this.props.elementToFocus?this.props.elementToFocus:null===(e=this.tabHandler)||void 0===e?void 0:e.getInitial();t&&t.focus()}},{key:"setCloseFocusElement",value:function(){if(this.props.elementToFocusOnExit?this.closeFocusElement=this.props.elementToFocusOnExit:this.closeFocusElement=document.activeElement,(0,_.fF)()&&(!this.closeFocusElement||this.closeFocusElement===document.documentElement)){throw new Error("\nDev Mode Error: Could not detect an element to focus on <Modal /> close.\n\nIt seems auto-detection isn't working, so you'll need to specify the \"elementToFocusOnExit\" props.")}}},{key:"handleShiftTab",value:function(e){var t,n=null===(t=this.tabHandler)||void 0===t?void 0:t.getNext(void 0,!0);n&&(e.preventDefault(),e.stopPropagation(),n.focus())}},{key:"handleTab",value:function(e){var t,n=null===(t=this.tabHandler)||void 0===t?void 0:t.getNext();n&&(e.preventDefault(),e.stopPropagation(),n.focus())}}]),n}(D.Component);(0,c.Z)(I,"stack",[])}}]);