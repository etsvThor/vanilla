(self.webpackChunkvanillaadmin=self.webpackChunkvanillaadmin||[]).push([[5852],{71357:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(6610),s=n(96156),a=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(40798);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var s=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var f=function(t){(0,i.Z)(n,t);var e=l(n);function n(){var t;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return t=e.call.apply(e,[this].concat(o)),(0,s.Z)((0,a.Z)(t),"getConversations",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.dispatchApi("get","/conversations",n.getConversationsACs,e)})),t}return n}(c.ZP);(0,s.Z)(f,"GET_CONVERSATIONS_REQUEST","@@conversations/GET_CONVERSATIONS_REQUEST"),(0,s.Z)(f,"GET_CONVERSATIONS_RESPONSE","@@conversations/GET_CONVERSATIONS_RESPONSE"),(0,s.Z)(f,"GET_CONVERSATIONS_ERROR","@@conversations/GET_CONVERSATIONS_ERROR"),(0,s.Z)(f,"getConversationsACs",c.ZP.generateApiActionCreators(f.GET_CONVERSATIONS_REQUEST,f.GET_CONVERSATIONS_RESPONSE,f.GET_CONVERSATIONS_ERROR,{},{})),(0,s.Z)(f,"ACTION_TYPES",void 0);var d=n(87219),p=n(22964),v=function t(){var e=this;(0,r.Z)(this,t),(0,s.Z)(this,"initialState",{conversationsByID:{data:{},status:p.Px.PENDING}}),(0,s.Z)(this,"reducer",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.initialState,n=arguments.length>1?arguments[1]:void 0;return(0,d.ZP)(t,(function(t){switch(n.type){case f.GET_CONVERSATIONS_REQUEST:t.conversationsByID.status=p.Px.LOADING;break;case f.GET_CONVERSATIONS_RESPONSE:t.conversationsByID.status=p.Px.SUCCESS,t.conversationsByID.data={},n.payload.data.forEach((function(e){t.conversationsByID.data[e.conversationID]=e}));break;case f.GET_CONVERSATIONS_ERROR:t.conversationsByID.status=p.Px.ERROR,t.conversationsByID.error=n.payload}}))}))}},83913:function(t,e,n){"use strict";n.d(e,{G:function(){return C}});var r=n(96156),s=n(22964),a=n(81253),i=n(92137),o=n(6610),u=n(63349),c=n(10379),l=n(46070),f=n(77608),d=n(87757),p=n.n(d),v=n(40798);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var s=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var E=(0,n(99308).Jy)("@@discussions"),y=function(t){(0,c.Z)(n,t);var e=g(n);function n(){var t;(0,o.Z)(this,n);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=e.call.apply(e,[this].concat(c)),(0,r.Z)((0,u.Z)(t),"getDiscussionList",(function(e){var r=(0,v.KP)(n.getDiscussionListACs,(0,i.Z)(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.api.get("/discussions",{params:S(S({},e),{},{expand:["insertUser","breadcrumbs"]})});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}),n)}))))(e);return t.dispatch(r)})),(0,r.Z)((0,u.Z)(t),"getDiscussionByID",(function(e){var r=e.discussionID,s=(0,v.KP)(n.getDiscussionByIDACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/discussions/".concat(r),{params:{expand:["insertUser","breadcrumbs"]}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))({discussionID:r});return t.dispatch(s)})),(0,r.Z)((0,u.Z)(t),"patchDiscussion",(function(e){var r=e.discussionID,s=(e.patchStatusID,(0,a.Z)(e,["discussionID","patchStatusID"])),o={params:{expand:["category"]}},u=(0,v.KP)(n.patchDiscussionACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.patch("/discussions/".concat(r),s,o);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))(e);return t.dispatch(u)})),(0,r.Z)((0,u.Z)(t),"putDiscussionType",(function(e){var r=e.discussionID,s=e.type,a=(0,v.KP)(n.putDiscussionTypeACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.put("/discussions/".concat(r,"/type"),{type:s});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))({discussionID:r,type:s});return t.dispatch(a)})),(0,r.Z)((0,u.Z)(t),"putDiscussionBookmarked",(function(e){var r=e.discussionID,s=e.bookmarked,a=(0,v.KP)(n.putDiscussionBookmarkedACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.put("/discussions/".concat(r,"/bookmark"),{bookmarked:s});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))({discussionID:r,bookmarked:s});return t.dispatch(a)})),(0,r.Z)((0,u.Z)(t),"postDiscussionReaction",(function(e){var r=e.discussionID,s=e.reaction,a=(0,v.KP)(n.postDiscussionReactionACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.post("/discussions/".concat(r,"/reactions"),{reactionType:s.urlcode});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))(e);return t.dispatch(a)})),(0,r.Z)((0,u.Z)(t),"deleteDiscussionReaction",(function(e){var r=e.discussionID,s=(0,v.KP)(n.deleteDiscussionReactionACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.delete("/discussions/".concat(r,"/reactions"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))(e);return t.dispatch(s)})),(0,r.Z)((0,u.Z)(t),"deleteDiscussion",(function(e){var r=e.discussionID,s=function(){var e=(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.delete("/discussions/".concat(r));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=(0,v.KP)(n.deleteDiscussionACs,s)({discussionID:r});return t.dispatch(a)})),(0,r.Z)((0,u.Z)(t),"putDiscussionTags",(function(e){var r=e.discussionID,s=e.tagIDs,a=(0,v.KP)(n.putDiscussionTagsACs,(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.put("/discussions/".concat(r,"/tags"),{tagIDs:s});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))({discussionID:r,tagIDs:s});return t.dispatch(a)})),t}return n}(v.ZP);(0,r.Z)(y,"getDiscussionListACs",E.async("GET_DISCUSSION_LIST")),(0,r.Z)(y,"getDiscussionByIDACs",E.async("GET_DISCUSSION")),(0,r.Z)(y,"patchDiscussionACs",E.async("PATCH_DISCUSSION")),(0,r.Z)(y,"putDiscussionTypeACs",E.async("PUT_DISCUSSION_TYPE")),(0,r.Z)(y,"putDiscussionBookmarkedACs",E.async("PUT_DISCUSSION_BOOKMARKED")),(0,r.Z)(y,"postDiscussionReactionACs",E.async("POST_DISCUSSION_REACTION")),(0,r.Z)(y,"deleteDiscussionReactionACs",E.async("DELETE_DISCUSSION_REACTION")),(0,r.Z)(y,"deleteDiscussionACs",E.async("DELETE_DISCUSSION")),(0,r.Z)(y,"putDiscussionTagsACs",E.async("PUT_DISCUSSION_TAGS"));var D=n(87219),m=n(76983),O=n(61403);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){var r,s,a,i,o=null!==(r=null===(s=n.removeReaction)||void 0===s?void 0:s.reactionValue)&&void 0!==r?r:0,u=null!==(a=null===(i=n.addReaction)||void 0===i?void 0:i.reactionValue)&&void 0!==a?a:0,c=t.discussionsByID[e].score-o+u;return t.discussionsByID[e].score=c,t.discussionsByID[e].reactions=t.discussionsByID[e].reactions.map((function(t){var e,r;return R(R({},t),{},{hasReacted:null!==(e=t.urlcode===(null===(r=n.addReaction)||void 0===r?void 0:r.urlcode))&&void 0!==e&&e})})),t}var C=(0,D.ZP)((0,m.reducerWithInitialState)({discussionsByID:{},discussionIDsByParamHash:{},fullRecordStatusesByID:{},bookmarkStatusesByID:{},patchStatusByPatchID:{},deleteStatusesByID:{},changeTypeByID:{},postReactionStatusesByID:{},deleteReactionStatusesByID:{},putTagsByID:{}}).case(y.getDiscussionByIDACs.started,(function(t,e){var n=e.discussionID;return t.fullRecordStatusesByID[n]={status:s.Px.LOADING},t})).case(y.getDiscussionByIDACs.failed,(function(t,e){var n=e.params.discussionID;return t.fullRecordStatusesByID[n]={status:s.Px.ERROR,error:e.error},t})).case(y.getDiscussionByIDACs.done,(function(t,e){var n=e.params.discussionID;return t.fullRecordStatusesByID[n]={status:s.Px.SUCCESS},t.discussionsByID[n]=R(R({},t.discussionsByID[n]),e.result),t})).case(y.putDiscussionBookmarkedACs.started,(function(t,e){var n=e.discussionID;return t.bookmarkStatusesByID[n]={status:s.Px.LOADING},t})).case(y.putDiscussionBookmarkedACs.done,(function(t,e){var n=e.params.discussionID;return t.bookmarkStatusesByID[n]={status:s.Px.SUCCESS},t.discussionsByID[n]=R(R({},t.discussionsByID[n]),{},{bookmarked:e.result.bookmarked}),t})).case(y.putDiscussionTypeACs.started,(function(t,e){var n=e.discussionID;return t.changeTypeByID[n]={status:s.Px.LOADING},t})).case(y.putDiscussionTypeACs.done,(function(t,e){var n=e.params.discussionID;return t.changeTypeByID[n]={status:s.Px.SUCCESS},t.discussionsByID[n]=R(R({},t.discussionsByID[n]),e.result),t})).case(y.putDiscussionTypeACs.failed,(function(t,e){var n=e.params.discussionID;return t.changeTypeByID[n]={status:s.Px.ERROR,error:e.error},t})).case(y.getDiscussionListACs.started,(function(t,e){var n=(0,O.Q6)(e);return t.discussionIDsByParamHash[n]={status:s.Px.LOADING},t})).case(y.getDiscussionListACs.done,(function(t,e){var n=(0,O.Q6)(e.params);return t.discussionIDsByParamHash[n]={status:s.Px.SUCCESS,data:e.result.map((function(t){return t.discussionID}))},e.result.forEach((function(e){t.discussionsByID[e.discussionID]=R(R({},t.discussionsByID[e.discussionID]),e)})),t})).case(y.getDiscussionListACs.failed,(function(t,e){var n=(0,O.Q6)(e.params);return t.discussionIDsByParamHash[n]={status:s.Px.ERROR,error:e.error},t})).case(y.patchDiscussionACs.started,(function(t,e){var n=e.discussionID,r=e.patchStatusID;return t.patchStatusByPatchID["".concat(n,"-").concat(r)]={status:s.Px.LOADING},t})).case(y.patchDiscussionACs.done,(function(t,e){var n=e.params,r=n.discussionID,a=n.patchStatusID;return t.patchStatusByPatchID["".concat(r,"-").concat(a)]={status:s.Px.SUCCESS},t.discussionsByID[e.result.discussionID]=R(R({},t.discussionsByID[e.result.discussionID]),e.result),t})).case(y.patchDiscussionACs.failed,(function(t,e){var n=e.params,r=n.discussionID,a=n.patchStatusID;return t.patchStatusByPatchID["".concat(r,"-").concat(a)]={status:s.Px.ERROR,error:e.error},t})).case(y.deleteDiscussionACs.started,(function(t,e){var n=e.discussionID;return t.deleteStatusesByID[n]={status:s.Px.LOADING},t})).case(y.deleteDiscussionACs.done,(function(t,e){var n=e.params.discussionID;return t.deleteStatusesByID[n]={status:s.Px.SUCCESS},delete t.discussionsByID[n],Object.keys(t.discussionIDsByParamHash).forEach((function(e){void 0!==t.discussionIDsByParamHash[e].data&&(t.discussionIDsByParamHash[e].data=t.discussionIDsByParamHash[e].data.filter((function(t){return t!==n})))})),t})).case(y.deleteDiscussionACs.failed,(function(t,e){var n=e.params.discussionID;return t.deleteStatusesByID[n]={status:s.Px.ERROR,error:e.error},t})).case(y.postDiscussionReactionACs.started,(function(t,e){var n=e.discussionID,r=e.reaction,a=e.currentReaction;return t.postReactionStatusesByID[n]={status:s.Px.PENDING},A(t,n,{removeReaction:a,addReaction:r}),t})).case(y.postDiscussionReactionACs.done,(function(t,e){var n=e.params.discussionID;return t.postReactionStatusesByID[n]={status:s.Px.SUCCESS},t})).case(y.postDiscussionReactionACs.failed,(function(t,e){var n=e.params,r=n.discussionID,a=n.reaction,i=n.currentReaction;return t.postReactionStatusesByID[r]={status:s.Px.ERROR,error:e.error},A(t,r,{removeReaction:a,addReaction:i}),t})).case(y.deleteDiscussionReactionACs.started,(function(t,e){var n=e.discussionID,r=e.currentReaction;return t.deleteReactionStatusesByID[n]={status:s.Px.PENDING},A(t,n,{removeReaction:r}),t})).case(y.deleteDiscussionReactionACs.done,(function(t,e){var n=e.params.discussionID;return t.deleteReactionStatusesByID[n]={status:s.Px.SUCCESS},t})).case(y.deleteDiscussionReactionACs.failed,(function(t,e){var n=e.params,r=n.discussionID,a=n.currentReaction;return t.deleteReactionStatusesByID[r]={status:s.Px.ERROR,error:e.error},A(t,r,{addReaction:a}),t})).case(y.putDiscussionTagsACs.started,(function(t,e){var n=e.discussionID;return t.putTagsByID[n]={status:s.Px.LOADING},t})).case(y.putDiscussionTagsACs.done,(function(t,e){var n=e.params.discussionID;return t.putTagsByID[n]={status:s.Px.SUCCESS},t.discussionsByID[n]=R(R({},t.discussionsByID[n]),{},{tags:e.result}),t})).case(y.putDiscussionTagsACs.failed,(function(t,e){var n=e.params.discussionID;return t.putTagsByID[n]={status:s.Px.ERROR,error:e.error},t})))},82562:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(6610),s=n(63349),a=n(10379),i=n(46070),o=n(77608),u=n(96156),c=n(40798);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,o.Z)(t);if(e){var s=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var f=function(t){(0,a.Z)(n,t);var e=l(n);function n(){var t;(0,r.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),(0,u.Z)((0,s.Z)(t),"getNotification",(function(e){return t.dispatchApi("get","/notifications/".concat(e),n.getNotificationACs,{})})),(0,u.Z)((0,s.Z)(t),"getNotifications",(function(){return t.dispatchApi("get","/notifications",n.getNotificationsACs,{})})),(0,u.Z)((0,s.Z)(t),"markRead",(function(e){return t.dispatchApi("patch","/notifications/".concat(e),n.markReadACs,{read:!0})})),(0,u.Z)((0,s.Z)(t),"markAllRead",(function(){return t.dispatchApi("patch","/notifications",n.markAllReadACs,{read:!0})})),t}return n}(c.ZP);(0,u.Z)(f,"GET_NOTIFICATION_REQUEST","@@notifications/GET_NOTIFICATION_REQUEST"),(0,u.Z)(f,"GET_NOTIFICATION_RESPONSE","@@notifications/GET_NOTIFICATION_RESPONSE"),(0,u.Z)(f,"GET_NOTIFICATION_ERROR","@@notifications/GET_NOTIFICATION_ERROR"),(0,u.Z)(f,"getNotificationACs",c.ZP.generateApiActionCreators(f.GET_NOTIFICATION_REQUEST,f.GET_NOTIFICATION_RESPONSE,f.GET_NOTIFICATION_ERROR,{},{})),(0,u.Z)(f,"GET_NOTIFICATIONS_REQUEST","@@notifications/GET_NOTIFICATIONS_REQUEST"),(0,u.Z)(f,"GET_NOTIFICATIONS_RESPONSE","@@notifications/GET_NOTIFICATIONS_RESPONSE"),(0,u.Z)(f,"GET_NOTIFICATIONS_ERROR","@@notifications/GET_NOTIFICATIONS_ERROR"),(0,u.Z)(f,"getNotificationsACs",c.ZP.generateApiActionCreators(f.GET_NOTIFICATIONS_REQUEST,f.GET_NOTIFICATIONS_RESPONSE,f.GET_NOTIFICATIONS_ERROR,{},{})),(0,u.Z)(f,"MARK_READ_REQUEST","@@notifications/MARK_READ_REQUEST"),(0,u.Z)(f,"MARK_READ_RESPONSE","@@notifications/MARK_READ_RESPONSE"),(0,u.Z)(f,"MARK_READ_ERROR","@@notifications/MARK_READ_ERROR"),(0,u.Z)(f,"markReadACs",c.ZP.generateApiActionCreators(f.MARK_READ_REQUEST,f.MARK_READ_RESPONSE,f.MARK_READ_ERROR,{},{})),(0,u.Z)(f,"MARK_ALL_READ_REQUEST","@@notifications/MARK_ALL_READ_REQUEST"),(0,u.Z)(f,"MARK_ALL_READ_RESPONSE","@@notifications/MARK_ALL_READ_RESPONSE"),(0,u.Z)(f,"MARK_ALL_READ_ERROR","@@notifications/MARK_ALL_READ_ERROR"),(0,u.Z)(f,"markAllReadACs",c.ZP.generateApiActionCreators(f.MARK_ALL_READ_REQUEST,f.MARK_ALL_READ_RESPONSE,f.MARK_ALL_READ_ERROR,{},{})),(0,u.Z)(f,"ACTION_TYPES",void 0)},58204:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(6610),s=n(96156),a=n(82562),i=n(87219),o=n(22964),u=function t(){var e=this;(0,r.Z)(this,t),(0,s.Z)(this,"initialState",{notificationsByID:{data:{},status:o.Px.PENDING}}),(0,s.Z)(this,"reducer",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.initialState,n=arguments.length>1?arguments[1]:void 0;return(0,i.ZP)(t,(function(t){switch(n.type){case a.Z.GET_NOTIFICATIONS_REQUEST:t.notificationsByID.status=o.Px.LOADING;break;case a.Z.GET_NOTIFICATIONS_RESPONSE:t.notificationsByID.status=o.Px.SUCCESS,t.notificationsByID.data={},n.payload.data.forEach((function(e){t.notificationsByID.data[e.notificationID]=e}));break;case a.Z.GET_NOTIFICATIONS_ERROR:t.notificationsByID.status=o.Px.ERROR,t.notificationsByID.error=n.payload;break;case a.Z.MARK_ALL_READ_RESPONSE:var e=t.notificationsByID.data;if(e)for(var r=0,s=Object.keys(e);r<s.length;r++){e[s[r]].read=!0}}}))}))}},52502:function(t,e,n){"use strict";n.d(e,{V1:function(){return s},Yk:function(){return i}});var r=n(67294),s="site",a=r.createContext({optionsItems:[]});function i(){return(0,r.useContext)(a)}},75791:function(t,e,n){"use strict";n.d(e,{V:function(){return v}});var r=n(96156),s=n(41033),a=n(71055),i=n(10389),o=n(13901),u=n(35138),c=n(46457),l=n(97133);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=(0,u.yI)((function(){var t=(0,s.OF)(),e=(0,o.Cg)("searchResults"),n=e("colors",{fg:t.mainColors.fg}),r=e("title",{font:c.L.font(d(d({},t.fontSizeAndWeightVars("large","semiBold")),{},{color:n.fg,lineHeight:t.lineHeights.condensed,textDecoration:"none"}))}),i=e("excerpt",{fg:t.mainColors.fg,margin:"0.7em"}),u=e("image",{border:{color:t.mixBgAndFg(.1)}}),l=e("icon",{size:26,bg:a.w.colorOut(t.mixBgAndFg(.1))});return{colors:n,title:r,excerpt:i,image:u,separator:e("separator",{fg:t.separator.color,width:t.separator.size}),spacing:e("spacing",{padding:t.itemList.padding}),icon:l,mediaElement:e("mediaElement",{width:190,height:106.875,margin:15,compact:{ratio:56.25}})}})),v=(0,u.yI)((function(){var t=p();return{iconWrap:(0,l.iv)({display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:a.w.colorOut(t.icon.bg),borderRadius:"50%",width:(0,i.dd)(t.icon.size),height:(0,i.dd)(t.icon.size),flexShrink:0,cursor:"pointer"},";label:searchResultsStyles-iconWrap;")}}))},98897:function(t,e,n){"use strict";n.d(e,{h:function(){return p}});var r=n(96156),s=n(41033),a=n(99134),i=n(35138),o=n(85819),u=n(28015),c=n(33383),l=n(67920);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=(0,i.yI)((function(t){var e=(0,s.OF)(),n=(0,a._)(),r=(t||{}).forDashboard,i=void 0!==r&&r,f=(0,c._)().mediaQueries();return{option:d(d(d(d({},(0,u.m)()),{},{width:(0,o.aQ)(100)},l.W.padding({vertical:6,horizontal:12})),l.W.font(d(d({},i?e.fontSizeAndWeightVars("medium"):e.fontSizeAndWeightVars("large")),{},{color:e.mainColors.fg}))),{},{textAlign:"left",display:"block",color:"inherit"},{".suggestedTextInput-parentTag":d({},l.W.font(d(d({},n.font),{},{lineHeight:"inherit"}))),"&:hover, &:focus, &.isFocused":{color:"inherit",backgroundColor:e.states.hover.highlight.toString()},"&":d({},f.xs(d({},l.W.padding({vertical:10}))))})}}))},34793:function(t,e,n){"use strict";n.d(e,{k:function(){return E}});var r=n(96156),s=n(28481),a=n(92137),i=n(87757),o=n.n(i),u=n(67294),c="data-deep-link";function l(t){var e=t.enabled,n=t.path,r=t.text,s=e?"/".concat(n):void 0;return u.createElement("a",{href:s,onClick:function(t){t.preventDefault()},className:"nostyle","data-id":"/".concat(n),"data-deep-link":!0},u.createElement("span",null,r))}var f=n(10366);function d(t){var e=t.errSelectors,n=t.specSelectors,r=t.getComponent,s=r("SvgAssets"),a=r("VersionPragmaFilter"),i=r("operations",!0),o=r("Models",!0),c=r("Row"),l=r("Col"),d=r("errors",!0),p=n.isSwagger2(),v=n.isOAS3(),I=!n.specStr(),S=n.loadingStatus(),g=null;if("loading"===S)return u.createElement(f.Z,{padding:200});if("failed"===S&&(g=u.createElement("div",{className:"info"},u.createElement("div",{className:"loading-container"},u.createElement("h4",{className:"title"},"Failed to load API definition."),u.createElement(d,null)))),"failedConfig"===S){var E=e.lastError(),y=E?E.get("message"):"";g=u.createElement("div",{className:"info",style:{maxWidth:"880px",marginLeft:"auto",marginRight:"auto",textAlign:"center"}},u.createElement("div",{className:"loading-container"},u.createElement("h4",{className:"title"},"Failed to load remote configuration."),u.createElement("p",null,y)))}return!g&&I&&(g=u.createElement("h4",null,"No API definition provided.")),g?u.createElement("div",{className:"swagger-ui"},u.createElement("div",{className:"loading-container"},g)):u.createElement("div",{className:"swagger-ui"},u.createElement(s,null),u.createElement(a,{isSwagger2:p,isOAS3:v,alsoShow:u.createElement(d,null)},u.createElement(d,null),u.createElement(c,null,u.createElement(l,{mobile:12,desktop:12},u.createElement(i,null))),u.createElement(c,null,u.createElement(l,{mobile:12,desktop:12},u.createElement(o,null)))))}var p=n(78804);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(){return(S=(0,a.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(9350),n.e(6444),n.e(7291)]).then(n.bind(n,18645));case 2:return e=t.sent,t.abrupt("return",e.SwaggerUI);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return null!=t}function E(t){var e=t.url,n=t.spec,r=t.tryIt,a=void 0!==r&&r,i=(0,u.useState)([]),o=(0,s.Z)(i,2),f=o[0],v=o[1],E=(0,u.useState)(!0),y=(0,s.Z)(E,2),D=y[0],m=y[1],O=(0,u.useRef)(null);return(0,u.useEffect)((function(){a&&O.current&&!O.current.classList.contains("tryIt")&&O.current.classList.add("tryIt")}),[a]),(0,u.useEffect)((function(){(function(){return S.apply(this,arguments)})().then((function(e){e.plugins.DeepLinkingLayout.statePlugins.layout.actions.scrollToElement=function(t,e){return(0,p.kI)(t,window.__VANILLA_GLOBAL_SCROLL_OFFSET__),function(){}},O.current&&(m(!1),e(I(I({domNode:O.current,plugins:[{components:{VanillaSwaggerLayout:d,DeepLink:l}}],layout:"VanillaSwaggerLayout"},t),{},{operationsSorter:"alpha",deepLinking:!0,onComplete:function(){var t=O.current.querySelectorAll(".opblock-tag, .opblock"),e=Array.from(t).map((function(t){if(t.classList.contains("opblock-tag")){var e,n=t.getAttribute("data-tag"),r=null===(e=t.querySelector("[".concat(c,"]")))||void 0===e?void 0:e.getAttribute("data-id");return n&&r?{text:n.replace(/\u200B/g,""),ref:r,level:2}:null}var s,a,i,o,u,l=null!==(s=null===(a=t.querySelector(".opblock-summary-method"))||void 0===a?void 0:a.textContent)&&void 0!==s?s:"",f=null!==(i=null===(o=t.querySelector(".opblock-summary-path"))||void 0===o?void 0:o.textContent)&&void 0!==i?i:"",d=null===(u=t.querySelector("[".concat(c,"]")))||void 0===u?void 0:u.getAttribute("data-id");return l&&f&&d?{text:(l+" "+f).replace(/\u200B/g,""),ref:d,level:3}:null})).filter(g);v(e)}})))}))}),[n,e]),{swaggerRef:O,headings:f,isLoading:D}}},15835:function(t,e,n){"use strict";n.d(e,{AB:function(){return O}});var r=n(87219),s=n(76983),a=n(22964),i=n(92137),o=n(6610),u=n(63349),c=n(10379),l=n(46070),f=n(77608),d=n(96156),p=n(87757),v=n.n(p),I=n(40798),S=n(99308),g=n(23279),E=n.n(g);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var s=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var D=(0,S.ZP)("@@tags"),m=function(t){(0,c.Z)(n,t);var e=y(n);function n(){var t;(0,o.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s)),(0,d.Z)((0,u.Z)(t),"getTagsInternal",(function(e){var r=(0,I.KP)(n.getTagsACs,(0,i.Z)(v().mark((function n(){var r;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.api.get("/tags?query=".concat(e.name));case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}),n)}))))(e);return t.dispatch(r)})),(0,d.Z)((0,u.Z)(t),"getTags",E()(t.getTagsInternal,100)),t}return n}(I.ZP);(0,d.Z)(m,"getTagsACs",D.async("GET"));n(14494);var O=(0,r.Uy)((0,s.reducerWithInitialState)({tagsByName:{}}).case(m.getTagsACs.started,(function(t,e){return t.tagsByName[e.name]={status:a.Px.LOADING},t})).case(m.getTagsACs.done,(function(t,e){return t.tagsByName[e.params.name]={status:a.Px.SUCCESS,data:e.result},t})).case(m.getTagsACs.failed,(function(t,e){return t.tagsByName[e.params.name]={status:a.Px.ERROR},t})))},80146:function(t,e,n){"use strict";n.d(e,{Z:function(){return P}});var r=n(6610),s=n(5991),a=n(10379),i=n(46070),o=n(77608),u=n(67294),c=n(96156),l=n(51305),f=n(71055),d=n(10389),p=n(67920),v=n(13901),I=n(35138),S=n(41033),g=n(52571),E=n(48881);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){(0,c.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=(0,I.yI)((function(){var t=(0,S.OF)(),e=(0,v.Y7)("toast");return{root:function(){return e("box",D(D(D(D(D({},p.W.font(D({},t.fontSizeAndWeightVars("medium")))),{},{zIndex:1,position:"fixed",bottom:18,left:18,display:"inline-block"},p.W.padding({horizontal:t.gutter.size,top:t.gutter.size,bottom:t.gutter.half})),{},{margin:(0,d.dd)(t.gutter.quarter)},p.W.border()),(0,g.kL)().dropDown()),{},{background:f.w.colorOut(t.mainColors.bg),p:{margin:0}}))},buttons:e("button",D({minHeight:(0,E._)().sizing.minHeight},(0,l.flexHelper)().middleLeft())),button:e("button",D({margin:(0,d.dd)("3px")},p.W.font(D({},t.fontSizeAndWeightVars("medium")))))}})),O=n(63059),h=n(94184),R=n.n(h),A=n(26444);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,o.Z)(t);if(e){var s=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var P=function(t){(0,a.Z)(n,t);var e=C(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=(t.className,t.links),n=t.message,r=m();return u.createElement("div",{className:R()(r.root())},u.createElement("p",null,n),u.createElement("div",{className:r.buttons},e.map((function(t,e){return u.createElement(O.Z,{key:e,buttonType:t.type,title:t.name,className:R()(r.button),onClick:t.onClick},t.isLoading?u.createElement(A.Z,{buttonType:t.type}):t.name)}))))}}]),n}(u.Component)},12720:function(t,e,n){"use strict";n.d(e,{N:function(){return S}});var r=n(92137),s=n(28481),a=n(87757),i=n.n(a),o=n(67294),u=n(43498),c=n(80146),l=n(64833),f=n(18574),d=n(3422),p=n(22964),v=n(13819),I=n(25807);function S(){var t,e=(0,d.n)(),n=e.applyStatus,a=e.cancelStatus,S=(0,o.useState)((0,l.xZ)("themePreview",null)),g=(0,s.Z)(S,2),E=g[0],y=(g[1],(0,f.ib)()),D=y.putCurrentTheme,m=y.putPreviewTheme,O=y.patchThemeWithRevisionID,h=(0,o.useState)(!1),R=(0,s.Z)(h,2),A=R[0],C=R[1],P=(0,o.useState)(!1),Z=(0,s.Z)(P,2),T=Z[0],b=Z[1],_=null!==(t=null==E?void 0:E.revisionID)&&void 0!==t&&t,N=function(){var t=(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E){t.next=2;break}return t.abrupt("return");case 2:if(!_){t.next=11;break}return C(!0),t.next=6,O({themeID:E.themeID,revisionID:E.revisionID});case 6:t.sent&&(C(!1),b(!0)),m({themeID:"",revisionID:void 0,type:f.N5.APPLY}),t.next=13;break;case 11:D(E.themeID),m({themeID:"",type:f.N5.APPLY});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m({themeID:"",type:f.N5.CANCEL});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){E&&(E.name&&n.status===p.Px.SUCCESS||a.status===p.Px.SUCCESS||T)&&(window.location.href=_?"/theme/theme-settings/".concat(E.themeID,"/revisions"):E.redirect)})),E?o.createElement(c.Z,{links:[{name:_?(0,I.t)("Restore"):(0,I.t)("Apply"),type:u.q.TEXT,onClick:N,isLoading:n.status===p.Px.LOADING||n.status===p.Px.SUCCESS||A},{name:(0,I.t)("Cancel"),type:u.q.TEXT_PRIMARY,onClick:x,isLoading:a.status===p.Px.LOADING||a.status===p.Px.SUCCESS}],message:o.createElement(o.Fragment,null,"You are previewing the ",o.createElement("b",null,E.name)," theme.",n.error&&o.createElement(v.Z,{errors:[n.error]}))}):null}},3422:function(t,e,n){"use strict";n.d(e,{Z:function(){return c},n:function(){return l}});var r=n(22964),s=n(87219),a=n(76983),i=n(18574),o=n(14494),u={applyStatus:{status:r.Px.PENDING},cancelStatus:{status:r.Px.PENDING}},c=(0,s.Uy)((0,a.reducerWithInitialState)(u).case(i.ZP.putCurrentThemeACs.started,(function(t,e){return t.applyStatus.status=r.Px.LOADING,t.applyStatus.data={themeID:e.themeID},t})).case(i.ZP.putCurrentThemeACs.done,(function(t,e){return t.applyStatus.status=r.Px.SUCCESS,t.applyStatus.error=void 0,t})).case(i.ZP.putCurrentThemeACs.failed,(function(t,e){return t.applyStatus.status=r.Px.ERROR,t.applyStatus.error=e.error,t})).case(i.ZP.putPreviewThemeACs.started,(function(t,e){return e.type===i.N5.CANCEL&&(t.cancelStatus.status=r.Px.LOADING),t.cancelStatus.data={themeID:e.themeID},t})).case(i.ZP.putPreviewThemeACs.done,(function(t,e){return e.params.type===i.N5.CANCEL&&(t.cancelStatus.status=r.Px.SUCCESS),t.cancelStatus.error=void 0,t})).case(i.ZP.putPreviewThemeACs.failed,(function(t,e){return t.cancelStatus.status=r.Px.ERROR,t.cancelStatus.error=e.error,t})));function l(){return(0,o.v9)((function(t){return t.themePreviewToaster}))}},97771:function(t,e,n){"use strict";var r=n(6610),s=n(5991),a=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(96156),l=n(67294),f=n(64833),d=n(22964),p=n(54956),v=n(40372),I=n(22241),S=n(14494),g=n(17239);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var s=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var y=function(t){(0,i.Z)(n,t);var e=E(n);function n(){var t;(0,r.Z)(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),(0,c.Z)((0,a.Z)(t),"onInputChange",(function(e){(e=e.trim())&&t.props.suggestionActions.loadUsers(e)})),t}return(0,s.Z)(n,[{key:"render",value:function(){var t,e=this.props,n=e.suggestions,r=e.label;return n.status===d.Px.SUCCESS&&n.data&&(t=n.data.map((function(t){return{value:t.userID,label:t.name}}))),l.createElement(g.N,{label:r?(0,f.t)(r):(0,f.t)("Author"),options:t,isLoading:n.status===d.Px.LOADING||n.status===d.Px.PENDING,onChange:this.props.onChange,value:this.props.value,onInputChange:this.onInputChange,className:this.props.className,maxHeight:this.props.maxHeight})}}]),n}(l.Component),D=(0,S.$j)(v.Z.mapStateToProps,(function(t){return{suggestionActions:new p.Z(t,I.ZP)}}));e.Z=D(y)},91353:function(t,e,n){"use strict";n.d(e,{Fs:function(){return o}});var r,s=n(28481),a=n(22964),i=n(9803);n(67294),n(85753);function o(t,e){var n=(0,i.ZP)().getState().users.permissions,o=t;if(Array.isArray(o)||(o=[o]),!n.data||n.status!==a.Px.SUCCESS)return!1;if(n.data.isAdmin)return!0;e||(e={mode:r.GLOBAL_OR_RESOURCE});var u=e,c=u.resourceID,l=u.resourceType;l||(l="global",c=null);var f=!1;if(null!=c&&null!=l){var d,p,v,I,S,g=null===(d=n.data.junctionAliases)||void 0===d?void 0:d[l];if(g)c=null!==(I=null!==(S=g[c])&&void 0!==S?S:g[c.toString()])&&void 0!==I?I:c;var E=null!==(p=null===(v=n.data.junctions)||void 0===v?void 0:v[l])&&void 0!==p?p:null;E&&(f=E.includes(c))}var y=n.data.permissions.filter((function(t){var n="global"===t.type,s=t.type===l&&t.id===c;switch(e.mode){case r.RESOURCE_IF_JUNCTION:return f?s:n;case r.GLOBAL:return n;case r.GLOBAL_OR_RESOURCE:return!0;case r.RESOURCE:return s}})),D=!1;return y.forEach((function(t){for(var e=0,n=Object.entries(t.permissions);e<n.length;e++){var r=(0,s.Z)(n[e],2),a=r[0],i=r[1];o.includes(a)&&i&&(D=!0)}})),D}!function(t){t.GLOBAL="global",t.RESOURCE="resource",t.GLOBAL_OR_RESOURCE="globalOrResource",t.RESOURCE_IF_JUNCTION="resourceIfJunction"}(r||(r={}))},54956:function(t,e,n){"use strict";n.d(e,{Z:function(){return E}});var r=n(6610),s=n(5991),a=n(63349),i=n(10379),o=n(46070),u=n(77608),c=n(96156),l=n(61403),f=n(22964),d=n(40798),p=n(40372),v=n(22241),I=n(23279),S=n.n(I);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var s=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var E=function(t){(0,i.Z)(n,t);var e=g(n);function n(){var t;(0,r.Z)(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),(0,c.Z)((0,a.Z)(t),"setActive",t.bindDispatch(n.setActiveAC)),(0,c.Z)((0,a.Z)(t),"interalLoadUsers",(function(e){return t.dispatch((function(t,r){var s=p.Z.selectSuggestionsTrie(r()),a=s.getValue(e);if(null!=a)switch(a.status){case f.Px.SUCCESS:if(a.data)return t(n.loadUsersACs.response({data:a.data,status:200},{username:e}));break;case f.Px.LOADING:return;case f.Px.ERROR:if(a.error)return t(n.loadUsersACs.error(a.error,{username:e}))}var i=s.getValueFromPartialsOfWord(e);if(null!=i)switch(i.status){case f.Px.SUCCESS:if(i.data&&i.data.length<n.USER_LIMIT)return t(n.loadUsersACs.response({data:n.filterSuggestions(i.data,e),status:200},{username:e}));break;case f.Px.ERROR:case f.Px.PENDING:}t(n.loadUsersACs.request({username:e}));var o={name:e+"*",order:"mention",limit:n.USER_LIMIT};return v.ZP.get("/users/by-names/",{params:o}).then((function(r){if(r.status>=500)throw new Error(r.data);r.data=r.data.map((function(t){return t.domID="mentionSuggestion"+t.userID,t})),t(n.loadUsersACs.response(r,{username:e}))})).catch((function(r){(0,l.H)(r),t(n.loadUsersACs.error(r,{username:e}))}))}))})),(0,c.Z)((0,a.Z)(t),"loadUsers",S()(t.interalLoadUsers,50)),t}return(0,s.Z)(n,null,[{key:"setActiveAC",value:function(t,e){return d.ZP.createAction(n.SET_ACTIVE_SUGGESTION,{suggestionID:t,suggestionIndex:e})}},{key:"filterSuggestions",value:function(t,e){var n=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0});return t.filter((function(t){if(t.name.length<e.length)return!1;var r=t.name.substring(0,e.length);return 0===n.compare(r,e)}))}}]),n}(d.ZP);(0,c.Z)(E,"SET_ACTIVE_SUGGESTION","@@mentions/SET_ACTIVE_SUGGESTION"),(0,c.Z)(E,"LOAD_USERS_REQUEST","@@mentions/GET_USERS_REQUEST"),(0,c.Z)(E,"LOAD_USERS_RESPONSE","@@mentions/LOAD_USERS_RESPONSE"),(0,c.Z)(E,"LOAD_USERS_ERROR","@@mentions/LOAD_USERS_ERROR"),(0,c.Z)(E,"ACTION_TYPES",void 0),(0,c.Z)(E,"USER_LIMIT",50),(0,c.Z)(E,"loadUsersACs",d.ZP.generateApiActionCreators(E.LOAD_USERS_REQUEST,E.LOAD_USERS_RESPONSE,E.LOAD_USERS_ERROR,{},{}))},40372:function(t,e,n){"use strict";n.d(e,{Z:function(){return I}});var r=n(81253),s=n(6610),a=n(5991),i=n(96156),o=n(22964),u=function(){function t(){(0,s.Z)(this,t),(0,i.Z)(this,"MAX_PARTIAL_LOOKUP_ITERATIONS",10),(0,i.Z)(this,"root",{})}return(0,a.Z)(t,[{key:"insert",value:function(t,e){for(var n=this.root,r=0;r<t.length;r++){var s=t[r];if(n.children||(n.children={}),!(s in n.children)){var a=r!==t.length-1?{}:{children:{}};n.children[s]=a}n=n.children[s]}n.value=e}},{key:"getNode",value:function(t){var e=this.root;if(void 0===t)return e;for(var n=0;n<t.length;n++){var r=t.charAt(n);if(!e.children||!e.children[r])return null;e=e.children[r]}return e}},{key:"getValue",value:function(t){var e=this.getNode(t);return e&&e.value||null}},{key:"getValueFromPartialsOfWord",value:function(t){for(var e=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,t.length);e>0;e--){var n=t.substring(0,e),r=this.getValue(n);if(null!=r)return r}return null}}]),t}(),c=n(54956),l=n(18560);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){o=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=function(){function t(){var e=this;(0,s.Z)(this,t),(0,i.Z)(this,"initialState",{lastSuccessfulUsername:null,currentUsername:null,trie:new u,activeSuggestionID:"",activeSuggestionIndex:0}),(0,i.Z)(this,"reducer",(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.initialState,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case c.Z.LOAD_USERS_REQUEST:var s=r.meta.username;n.trie.insert(s,{status:o.Px.LOADING});var a=!1,i=n.lastSuccessfulUsername;if(null!=i&&s.length>=i.length){var u=s.substring(0,i.length);u===i&&(a=!0)}return v(v({},n),{},{currentUsername:s,lastSuccessfulUsername:a?n.lastSuccessfulUsername:null});case c.Z.LOAD_USERS_ERROR:var l=r.payload,f=r.meta.username;return n.trie.insert(f,{status:o.Px.ERROR,data:void 0,error:l}),n;case c.Z.LOAD_USERS_RESPONSE:var d=r.payload.data,p=r.meta.username;n.trie.insert(p,{status:o.Px.SUCCESS,data:t.sortSuggestions(d,p)});var I=d.length>0?d[0].domID:"";return v(v({},n),{},{activeSuggestionID:I,activeSuggestionIndex:0,lastSuccessfulUsername:p,currentUsername:p});case c.Z.SET_ACTIVE_SUGGESTION:var S=r.payload,g=S.suggestionID,E=S.suggestionIndex;return v(v({},n),{},{activeSuggestionID:g,activeSuggestionIndex:E});default:return n}}))}return(0,a.Z)(t,null,[{key:"mapStateToProps",value:function(e){var n=v({},t.stateSlice(e)),s=n.trie,a=(0,r.Z)(n,["trie"]),i=n.lastSuccessfulUsername&&s.getValue(n.lastSuccessfulUsername)||t.defaultSuggestions,u=n.currentUsername&&s.getValue(n.currentUsername),c=!!u&&u.status===o.Px.LOADING;return v(v({},a),{},{suggestions:i,isLoading:c})}},{key:"selectSuggestionsTrie",value:function(e){return t.stateSlice(e).trie}},{key:"stateSlice",value:function(t){if(!t.users||!t.users.suggestions)throw new Error("Could not find users.suggestions in state ".concat(t,". Be sure to initialize the usersReducer()"));return t.users.suggestions}},{key:"sortSuggestions",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,s=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0}),a=90,i=[],o=[],u=(0,l.mM)(r,a),c=f(t);try{for(c.s();!(n=c.n()).done;){var d=n.value;if(d.dateLastActive){var p=d.dateLastActive?new Date(d.dateLastActive):new Date;(0,l.LY)(p,u)?i.push(d):o.push(d)}else o.push(d)}}catch(t){c.e(t)}finally{c.f()}var v=function(t,n){var r=e.toLocaleLowerCase(),a=t.name.toLocaleLowerCase(),i=n.name.toLocaleLowerCase();return a.startsWith(r)&&!i.startsWith(r)?-1:i.startsWith(r)&&!a.startsWith(r)?1:s.compare(t.name.toLocaleLowerCase(),n.name.toLocaleLowerCase())},I=function(t,n){var r=e.toLocaleLowerCase();return t.name.toLocaleLowerCase()===r?-1:0};i.sort(v),o.sort(v);var S=[].concat(i,o);return S.sort(I),S}}]),t}();(0,i.Z)(I,"defaultSuggestions",{status:o.Px.PENDING})},85753:function(t,e,n){"use strict";n.d(e,{$m:function(){return T},eu:function(){return N},cA:function(){return b}});var r=n(85061),s=n(96156),a=n(22964),i=n(40372),o=n(92137),u=n(6610),c=n(63349),l=n(10379),f=n(46070),d=n(77608),p=n(87757),v=n.n(p),I=n(40798);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var s=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var g=(0,n(99308).Jy)("@@users"),E=function(t){(0,l.Z)(n,t);var e=S(n);function n(){var t;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),(0,s.Z)((0,c.Z)(t),"getMe",(function(){if(t.getState().users.current.status!==a.Px.LOADING){var e=(0,I.KP)(n.getMeACs,(0,o.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/users/me");case 2:return n=e.sent,e.abrupt("return",null==n?void 0:n.data);case 4:case"end":return e.stop()}}),e)}))))();return t.dispatch(e)}})),(0,s.Z)((0,c.Z)(t),"getPermissions",(function(){if(t.getState().users.permissions.status===a.Px.PENDING){var e=(0,I.KP)(n.getPermissionsACs,(0,o.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/users/$me/permissions?expand=junctions");case 2:return n=e.sent,e.abrupt("return",null==n?void 0:n.data);case 4:case"end":return e.stop()}}),e)}))))();return t.dispatch(e)}})),(0,s.Z)((0,c.Z)(t),"checkCountData",(function(){var e=(new Date).getTime(),r=t.getState().users.countInformation.lastRequested;if(!(null!==r&&e<r+60)){var s=(0,I.KP)(n.getCountsACs,(0,o.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/users/me-counts");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))();return t.dispatch(s)}})),(0,s.Z)((0,c.Z)(t),"getUserByID",(function(e){var r=e.userID,s=(0,I.KP)(n.getUserACs,(0,o.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/users/".concat(r,"/?expand[]=all"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))({userID:r});return t.dispatch(s)})),(0,s.Z)((0,c.Z)(t),"clearInviteUsers",t.bindDispatch(n.clearInviteUsersAC)),(0,s.Z)((0,c.Z)(t),"inviteUsersByGroupID",(function(e){var r=e.groupID,s={userIDs:e.userIDs,emails:e.emails},a=(0,I.KP)(n.inviteUsersACs,(0,o.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.post("/groups/".concat(r,"/invitations"),s);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))))(e);return t.dispatch(a)})),(0,s.Z)((0,c.Z)(t),"updateIDs",(function(e){var r=e.userID,s=e.IDs;t.dispatch(n.updateInviteeIDsAC({userID:r,IDs:s}))})),(0,s.Z)((0,c.Z)(t),"updateEmails",(function(e){var r=e.userID,s=e.emails;t.dispatch(n.updateInviteeEmailsAC({userID:r,emails:s}))})),(0,s.Z)((0,c.Z)(t),"updateEmailsString",(function(e){var r=e.userID,s=e.emailsString;t.dispatch(n.updateInviteeEmailsStringAC({userID:r,emailsString:s}))})),(0,s.Z)((0,c.Z)(t),"updateInvitees",(function(e){var r=e.userID,s=e.invitees;t.dispatch(n.updateInviteesAC({userID:r,invitees:s}))})),t}return n}(I.ZP);(0,s.Z)(E,"getMeACs",g.async("GET_ME")),(0,s.Z)(E,"getPermissionsACs",g.async("GET_PERMISSIONS")),(0,s.Z)(E,"getCountsACs",g.async("GET_ME_COUNTS")),(0,s.Z)(E,"getUserACs",g.async("GET_USER")),(0,s.Z)(E,"clearInviteUsersAC",g("CLEAR_INVITE_USER")),(0,s.Z)(E,"inviteUsersACs",g.async("INVITE_USERS")),(0,s.Z)(E,"updateInviteeIDsAC",g("UPDATE_INVITEE_IDS")),(0,s.Z)(E,"updateInviteeEmailsAC",g("UPDATE_INVITEE_EMAIlS")),(0,s.Z)(E,"updateInviteeEmailsStringAC",g("UPDATE_INVITEE_EMAIlS_STRING")),(0,s.Z)(E,"updateInviteesAC",g("UPDATE_INVITEES"));var y=n(87219),D=n(76983),m=n(82562),O=n(14494),h=(n(67294),n(66678)),R=n.n(h);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=(new i.Z).reducer,Z={current:{status:a.Px.PENDING},permissions:{status:a.Px.PENDING},countInformation:{counts:[],lastRequested:null},suggestions:P(void 0,""),usersByID:{},usersInvitationsByID:{}};function T(t){return t&&0===t.userID}var b=(0,y.ZP)((0,D.reducerWithInitialState)(R()(Z)).case(E.getMeACs.started,(function(t){return t.current.status=a.Px.LOADING,t})).case(E.getMeACs.done,(function(t,e){return t.current.data=e.result,t.current.status=a.Px.SUCCESS,t})).case(E.getMeACs.failed,(function(t,e){return t.current.status=a.Px.ERROR,t.current.error=e.error,t})).case(E.getPermissionsACs.started,(function(t){return t.permissions.status=a.Px.LOADING,t})).case(E.getPermissionsACs.done,(function(t,e){return t.permissions.data=e.result,t.permissions.status=a.Px.SUCCESS,t})).case(E.getPermissionsACs.failed,(function(t,e){return t.permissions.status=a.Px.ERROR,t.permissions.error=e.error,t})).case(E.getCountsACs.started,(function(t){return t.countInformation.lastRequested=(new Date).getTime(),t})).case(E.getCountsACs.done,(function(t,e){return t.countInformation.counts=e.result.counts,t})).case(E.getUserACs.started,(function(t,e){var n=e.userID;return t.usersByID[n]={status:a.Px.LOADING},t})).case(E.getUserACs.done,(function(t,e){var n=e.params.userID;return t.usersByID[n]={data:e.result,status:a.Px.SUCCESS},t})).case(E.getUserACs.failed,(function(t,e){var n=e.params.userID;return t.usersByID[n]={status:a.Px.ERROR,error:e.error},t})).case(E.inviteUsersACs.started,(function(t,e){var n=e.userID;return t.usersInvitationsByID[n].results={status:a.Px.LOADING},t})).case(E.inviteUsersACs.done,(function(t,e){var n=e.params.userID;return t.usersInvitationsByID[n].results={status:a.Px.SUCCESS,data:e.result},t.usersInvitationsByID[n].emailsString="",t.usersInvitationsByID[n].invitees=[],t})).case(E.clearInviteUsersAC,(function(t,e){var n=e.userID;return delete t.usersInvitationsByID[n],t})).case(E.inviteUsersACs.failed,(function(t,e){var n=e.params.userID;return t.usersInvitationsByID[n].results={status:a.Px.ERROR,error:e.error},t})).case(E.updateInviteeIDsAC,(function(t,e){var n,s,a=e.userID,i=e.IDs;return t.usersInvitationsByID[a]=C(C({},t.usersInvitationsByID[a]),{},{userIDs:[].concat((0,r.Z)(null!==(n=null===(s=t.usersInvitationsByID[a])||void 0===s?void 0:s.userIDs)&&void 0!==n?n:[]),(0,r.Z)(i))}),t})).case(E.updateInviteesAC,(function(t,e){var n=e.userID,r=e.invitees;return t.usersInvitationsByID[n]=C(C({},t.usersInvitationsByID[n]),{},{invitees:r}),t})).case(E.updateInviteeEmailsAC,(function(t,e){var n,s,a=e.userID,i=e.emails;return t.usersInvitationsByID[a]=C(C({},t.usersInvitationsByID[a]),{},{emails:[].concat((0,r.Z)(null!==(n=null===(s=t.usersInvitationsByID[a])||void 0===s?void 0:s.emails)&&void 0!==n?n:[]),(0,r.Z)(i))}),t})).case(E.updateInviteeEmailsStringAC,(function(t,e){var n=e.userID,r=e.emailsString;return t.usersInvitationsByID[n]=C(C({},t.usersInvitationsByID[n]),{},{emailsString:r}),t})).default((function(t,e){return e.type===m.Z.MARK_ALL_READ_RESPONSE&&t.current.data&&(t.current.data.countUnreadNotifications=0),t.suggestions=P(t.suggestions,e),t})));function _(t){if(!t.users||!t.users.current)throw new Error('It seems you did not initialize the users model correctly. Could not find "users.current" in state: '.concat(t));return{currentUser:t.users.current}}function N(){return(0,O.v9)(_)}}}]);