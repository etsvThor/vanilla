(self.webpackChunkvanillaforum=self.webpackChunkvanillaforum||[]).push([[2919],{83673:function(e,t,n){"use strict";n.d(t,{T:function(){return E},Z:function(){return j}});var r=n(6610),a=n(5991),o=n(10379),s=n(46070),i=n(77608),c=n(67294),l=n(64833),u=n(67036),f=n(93266),p=n(96156),m=n(92366),d=n(71055),h=n(10389),g=n(41033),y=n(13901),v=n(35138),b=n(85819),O=n(67920);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E,N=(0,v.yI)((function(){var e=(0,y.Cg)("meBoxMessage");return{spacing:e("spacing",{padding:{top:8,right:12,bottom:8,left:12}}),imageContainer:e("imageContainer",{width:40}),unreadDot:e("unreadDot",{width:8})}})),C=(0,v.yI)((function(){var e=(0,g.OF)(),t=N(),n=(0,y.Y7)("meBoxMessage");return{root:n(w({display:"block"},{"& + &":{borderTop:"solid 1px ".concat(d.w.colorOut(e.border.color))}})),link:n("link",w(w(w({},(0,m.userSelect)()),{},{display:"flex",flexWrap:"nowrap",color:"inherit"},O.W.padding(t.spacing.padding)),(0,m.buttonStates)({allStates:{textShadow:"none"},hover:{backgroundColor:d.w.colorOut(e.states.hover.highlight)},focus:{backgroundColor:d.w.colorOut(e.states.hover.highlight)},active:{backgroundColor:d.w.colorOut(e.states.active.highlight)}}))),imageContainer:n("imageContainer",{position:"relative",width:(0,h.dd)(t.imageContainer.width),height:(0,h.dd)(t.imageContainer.width),flexBasis:(0,h.dd)(t.imageContainer.width),borderRadius:(0,b.aQ)(50),overflow:"hidden",border:"solid 1px ".concat(e.border.color.toString())}),image:n("image",w({width:(0,h.dd)(t.imageContainer.width),height:(0,h.dd)(t.imageContainer.width)},(0,m.objectFitWithFallback)())),status:n("status",w({position:"relative",width:(0,h.dd)(t.unreadDot.width),flexBasis:(0,h.dd)(t.unreadDot.width)},{"&.isUnread":w({},{"&:after":w(w({},O.W.absolute.middleRightOfParent()),{},{content:(0,b.mW)(""),height:(0,h.dd)(t.unreadDot.width),width:(0,h.dd)(t.unreadDot.width),backgroundColor:e.mainColors.primary.toString(),borderRadius:(0,b.aQ)(50)})})})),contents:n("contents",w(w({flexGrow:1},O.W.padding({left:t.spacing.padding.left,right:t.spacing.padding.right})),{},{maxWidth:(0,b.yx)("100% - ".concat((0,h.dd)(t.unreadDot.width+t.imageContainer.width)))})),message:n("message",{lineHeight:e.lineHeights.excerpt,color:d.w.colorOut(e.mainColors.fg)})}})),x=n(10965),R=n(63754),k=n(94184),P=n.n(k),B=n(74138),D=n(95762),S=n(17225);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}!function(e){e.NOTIFICATION="notification",e.MESSAGE="message"}(E||(E={}));var j=function(e){(0,o.Z)(n,e);var t=M(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.unread,r=t.message,a=t.timestamp,o=t.to,s=t.photoAlt,i=t.photo,p=C(),m=(0,x.Kw)();if(this.props.type===E.MESSAGE){var d=this.props.authors,h=this.props.authors.length;d&&h>0&&(e=d.map((function(e,t){return e?c.createElement(c.Fragment,{key:"meBoxAuthor-".concat(t)},c.createElement("strong",null,e.name),"".concat(t<h-1?", ":"")):c.createElement(c.Fragment,{key:"meBoxAuthor-".concat(t)})})))}return c.createElement("li",{className:P()("meBoxMessage",this.props.className,p.root)},c.createElement(f.Z,{to:o,className:P()("meBoxMessage-link",p.link),tabIndex:0},c.createElement("div",{className:P()(p.imageContainer,(0,D.re)().root)},i?c.createElement("img",{className:p.image,src:i,alt:s,loading:"lazy"}):c.createElement(B.Gx,{className:p.image,photoAlt:s})),c.createElement("div",{className:P()("meBoxMessage-contents",p.contents)},!!e&&c.createElement("div",{className:P()("meBoxMessage-message",p.message)},e),c.createElement("div",{className:P()("meBoxMessage-message",p.message),dangerouslySetInnerHTML:{__html:r}}),c.createElement("div",{className:P()("meBoxMessage-metas",m.root,"isFlexed")},a&&c.createElement(S.Z,{timestamp:a,className:m.meta}),this.props.type===E.MESSAGE&&c.createElement("span",{className:m.meta},1===this.props.countMessages&&c.createElement(R.Z,{source:"<0/> message",c0:1}),this.props.countMessages>1&&c.createElement(R.Z,{source:"<0/> messages",c0:this.props.countMessages})))),!n&&c.createElement(u.Z,{className:P()("meBoxMessage-status","isRead",p.status)}),n&&c.createElement("div",{title:(0,l.t)("Unread"),className:P()("u-flexSpacer","meBoxMessage-status","isUnread",p.status)},c.createElement("span",{className:"sr-only"},(0,l.t)("Unread")))))}}]),n}(c.Component)},99375:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(22122),a=n(6610),o=n(5991),s=n(10379),i=n(46070),c=n(77608),l=n(67294),u=n(83673),f=n(51523),p=n(94184),m=n.n(p);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var h=function(e){(0,s.Z)(n,e);var t=d(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.data.length,n=(0,f.V)();return l.createElement("div",{className:m()("meBoxMessageList",this.props.className)},t>0&&l.createElement("ul",{className:"meBoxMessageList-items"},this.props.data.map((function(t,n){return l.createElement(u.Z,(0,r.Z)({},t,{key:"MeBoxDropDownItemList-".concat(e.props.type,"-").concat(n)}))}))),0===t&&l.createElement("div",{className:m()("frameBody-noContentMessage",n.noContentMessage)},this.props.emptyMessage))}}]),n}(l.Component)},62417:function(e,t,n){"use strict";n.r(t),n.d(t,{NotificationsContents:function(){return A}});var r=n(6610),a=n(5991),o=n(63349),s=n(10379),i=n(46070),c=n(77608),l=n(96156),u=n(22964),f=n(22241),p=n(82562),m=n(63059),d=n(88202),h=n(43498),g=n(83673),y=n(99375),v=n(57739),b=n(34182),O=n(29571),Z=n(15172),w=n(51438),E=n(74232),N=n(10366),C=n(61525),x=n(64833),R=n(94184),k=n.n(R),P=n(67294),B=n(14494),D=n(74138);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var A=function(e){(0,s.Z)(n,e);var t=j(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),(0,l.Z)((0,o.Z)(e),"markAllRead",(function(){e.props.markAllRead()})),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props.userSlug,t=(0,x.t)("Notifications"),n=(0,E.B)(),r=(0,d.tB)();return P.createElement(b.Z,{className:k()(this.props.className),canGrow:!0,header:P.createElement(w.Z,{className:"hasAction",title:t},P.createElement(C.Z,{title:(0,x.t)("Notification Preferences"),buttonType:h.q.ICON,to:"/profile/preferences/".concat(e)},P.createElement(D.ew,null))),body:P.createElement(O.Z,{className:k()("isSelfPadded",this.props.panelBodyClass)},this.bodyContent()),footer:P.createElement(Z.Z,null,P.createElement(C.Z,{className:k()(r.pushLeft),to:"/profile/notifications",buttonType:h.q.TEXT},(0,x.t)("All Notifications")),P.createElement(m.Z,{onClick:this.markAllRead,buttonType:h.q.TEXT_PRIMARY,className:k()("frameFooter-markRead",n.markRead)},(0,x.t)("Mark All Read")))})}},{key:"bodyContent",value:function(){var e=this.props.notifications;return e.status===u.Px.SUCCESS&&e.data?P.createElement(y.Z,{emptyMessage:(0,x.t)("You do not have any notifications yet."),className:"headerDropDown-notifications",type:g.T.NOTIFICATION,data:Object.values(e.data)}):P.createElement(N.Z,{small:!0,minimumTime:0,padding:10})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.requestData;e.notifications.status===u.Px.PENDING&&t()}}]),n}(P.Component);t.default=(0,B.$j)((function(e){var t=e.notifications.notificationsByID,n=M(M({},t),{},{data:t.status===u.Px.SUCCESS&&t.data?Object.values(t.data).map((function(e){var t="?"+new URLSearchParams({transientKey:(0,x.xZ)("TransientKey")}).toString();return{message:e.body,photo:e.photoUrl||null,photoAlt:e.activityName?(0,x.ei)((0,x.t)('User: "%s"'),[e.activityName]):void 0,to:e.read?e.url:e.readUrl+t,recordID:e.notificationID,timestamp:e.dateUpdated,unread:!e.read,type:g.T.NOTIFICATION}})):void 0});return n.data&&n.data.sort((function(e,t){var n=new Date(e.timestamp).getTime();return new Date(t.timestamp).getTime()-n})),{notifications:n}}),(function(e){var t=new p.Z(e,f.ZP);return{markAllRead:t.markAllRead,requestData:t.getNotifications}}))((0,v.vm)(A))},51438:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(22122),a=n(6610),o=n(5991),s=n(10379),i=n(46070),c=n(77608),l=n(67294),u=n(58508),f=n(68469),p=n(94184),m=n.n(p);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var h=function(e){(0,s.Z)(n,e);var t=d(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=(0,f.g)();return l.createElement(u.Z,(0,r.Z)({},this.props,{className:m()(this.props.className,"frameHeaderWithAction",e.root)}),l.createElement("span",{className:m()("frameHeaderWithAction-action",e.action)},this.props.children))}}]),n}(l.PureComponent)}}]);