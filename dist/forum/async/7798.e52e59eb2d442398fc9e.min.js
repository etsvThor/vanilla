(self.webpackChunkvanillaforum=self.webpackChunkvanillaforum||[]).push([[7798],{77798:function(e,t,r){"use strict";r.d(t,{WI:function(){return S},bO:function(){return b},H1:function(){return g}});var n=r(6610),s=r(5991),o=r(63349),l=r(10379),f=r(46070),c=r(77608),a=r(96156),i=r(67294),u=r(27655),O=r(97133);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var s=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,f.Z)(this,r)}}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var d={setScrollOffset:function(){(0,u.KE)("Set scroll offset called, but a proper provider was not configured.")},resetScrollOffset:function(){(0,u.KE)("Reset scroll offset called, but a proper provider was not configured.")},scrollOffset:null,rawScrollOffset:null,topOffset:0,setTopOffset:function(e){(0,u.KE)("Set scroll offset called, but a proper provider was not configured.")},getCalcedHashOffset:function(){return 0},temporarilyDisabledWatching:function(){(0,u.KE)("Attempted to disable watching but a proper provider was not configured.")},hashOffsetRef:{current:null},offsetClass:""},v=i.createContext(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},d));window.__VANILLA_GLOBAL_SCROLL_OFFSET__=0;var S=function(e){(0,l.Z)(r,e);var t=p(r);function r(){var e;(0,n.Z)(this,r);for(var s=arguments.length,l=new Array(s),f=0;f<s;f++)l[f]=arguments[f];return e=t.call.apply(t,[this].concat(l)),(0,a.Z)((0,o.Z)(e),"state",{scrollOffset:0,topOffset:0,isScrolledOff:!1,hashOffset:0,isWatchingEnabled:!0}),(0,a.Z)((0,o.Z)(e),"hashOffsetRef",i.createRef()),(0,a.Z)((0,o.Z)(e),"temporarilyDisabledWatching",(function(t){e.setState({isWatchingEnabled:!1}),setTimeout((function(){e.setState({isWatchingEnabled:!0})}),t)})),(0,a.Z)((0,o.Z)(e),"previousScrollValue",0),(0,a.Z)((0,o.Z)(e),"scrollHandler",(function(){e.shouldWatchScroll&&requestAnimationFrame((function(){var t=window.scrollY;if(t<400)e.setState({isScrolledOff:!1});else{var r=t>e.previousScrollValue+10,n=t<e.previousScrollValue-10;e.previousScrollValue=window.scrollY,r?e.setState({isScrolledOff:!0}):n&&e.setState({isScrolledOff:!1})}}))})),(0,a.Z)((0,o.Z)(e),"resetScrollOffset",(function(){e.setState({scrollOffset:0,isScrolledOff:!1})})),(0,a.Z)((0,o.Z)(e),"setScrollOffset",(function(t){window.__VANILLA_GLOBAL_SCROLL_OFFSET__=t,e.setState({scrollOffset:t})})),(0,a.Z)((0,o.Z)(e),"setTopOffset",(function(t){e.setState({topOffset:t})})),(0,a.Z)((0,o.Z)(e),"getCalcedHashOffset",(function(){var t=e.hashOffsetRef.current;return t?t.getBoundingClientRect().bottom:0})),e}return(0,s.Z)(r,[{key:"render",value:function(){var e=this.props.scrollWatchingEnabled,t=this.state,r=t.scrollOffset,n=t.isScrolledOff,s=(0,O.iv)({transition:"transform 0.3s ease",willChange:"transform",transform:n?"translateY(-".concat(r,"px)"):"none",label:"offsetClass"},";label:ScrollOffsetContext-ScrollOffsetProvider;");return i.createElement(v.Provider,{value:{setScrollOffset:this.setScrollOffset,resetScrollOffset:this.resetScrollOffset,scrollOffset:n&&e?r:0,rawScrollOffset:r,topOffset:this.state.topOffset,setTopOffset:this.setTopOffset,offsetClass:e?s:"",getCalcedHashOffset:this.getCalcedHashOffset,hashOffsetRef:this.hashOffsetRef,temporarilyDisabledWatching:this.temporarilyDisabledWatching}},this.props.children)}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.scrollHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollHandler)}},{key:"shouldWatchScroll",get:function(){return this.props.scrollWatchingEnabled&&this.state.isWatchingEnabled}}]),r}(i.Component);function b(){var e=(0,i.useContext)(v);return(0,i.useDebugValue)(e),e}function g(e){var t=b();return i.createElement("div",{className:e.className,ref:t.hashOffsetRef},e.children)}}}]);