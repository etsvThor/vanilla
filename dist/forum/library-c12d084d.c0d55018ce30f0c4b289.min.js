(self.webpackChunkvanillaforum=self.webpackChunkvanillaforum||[]).push([[7014],{53191:function(e,t,n){"use strict";var o=n(98674),r=n(94370),a=n(25807),i=window.gdn||{};"meta"in i||(i.meta={}),"permissions"in i||(i.permissions={}),"translations"in i||(i.translations={}),"translate"in i||(i.translate=a.Iu),"makeAccessiblePopup"in i||(i.makeAccessiblePopup=function(e,t,n){var a,i;if(n){var l=n.id;l||(l=(0,o.qC)("popup"),n.setAttribute("id",l)),e.attr("aria-labelledby",l),e.attr("aria-describedby",l)}$.each(e.find("a, input"),(function(e,t){t.tagName&&"a"===t.tagName.toLowerCase()&&t.setAttribute("tabindex","0")}));var s=new r.yE(e[0]);(null===(a=s.getInitial())||void 0===a||a.focus(),s)&&(null!==(i=s.getAll())&&void 0!==i?i:[]).map((function(e,t){"a"===e.tagName.toLowerCase()&&e.setAttribute("tabindex","0"),e.addEventListener("keydown",(function(e){if(9===e.keyCode)if(e.shiftKey){var t=s.getNext(document.activeElement,!0,!0);t&&(e.preventDefault(),e.stopPropagation(),t.focus())}else{var n=s.getNext(document.activeElement,!1,!0);n&&(e.preventDefault(),e.stopPropagation(),n.focus())}}))}))}),t.Z=i},21058:function(e,t,n){"use strict";var o;n.d(t,{p:function(){return o}}),function(e){e.LEFT="left",e.CENTER="center"}(o||(o={}))},14647:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var o=n(28481),r=n(67294),a=n(52962),i=n(36194),l=n(53341),s=n(27655),c=n(40982);function u(e){var t=(0,i.r)().mobileOnlyNavigationItems,n=(0,r.useMemo)((function(){var e=t.map((function(e){return(0,a.bu)(e)})).filter(s.Dw);return[e,(0,a.yv)(e)]}),[t]),u=(0,o.Z)(n,2),m=u[0],g=u[1];return r.createElement(r.Fragment,null,m.length>0&&r.createElement(r.Fragment,null,r.createElement(l.Z,null),r.createElement(c.C,{navItems:m,activeRecord:g,isNestable:!0})))}},3172:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var o=n(22122),r=n(28481),a=n(96156),i=n(50981),l=n(50674),s=n(52962),c=n(92511),u=n(81076),m=n(61640),g=n(31045),f=n(43933),d=n(749),p=n(85202),b=n(9996),v=n(80522),h=n(16714),y=n(4494),E=n(50988),C=n(67036),w=n(77798),O=n(66062),B=n(29497),N=n(93266),x=n(39567),S=n(64833),I=n(94184),k=n.n(I),T=n(67294),M=n(73935),L=n(24301),P=n(98119),Z=n(14494),D=n(80610),j=n(33706),A=n(52897),R=n(9357),F=n(21058);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t,n=z({mobileDropDownContent:null,isFixed:!0,useMobileBackButton:!0,forceVisibility:!1},e),c=(0,v.d)().titleBarContainer,u=function(){var e,t,n,o=(0,T.useRef)(null),a=(0,T.useRef)(null),l=(0,T.useRef)(null),s=(0,i.nn)(),c=s.bannerExists,u=s.bannerRect,m=(0,T.useState)(0),g=(0,r.Z)(m,2),f=g[0],d=g[1],p=(0,v.d)().fullBleed,b=(0,v.d)().logo.doubleLogoStrategy,h=p.enabled&&c,y=(0,w.bO)().topOffset;(0,T.useEffect)((function(){var e=function(){requestAnimationFrame((function(){d(Math.max(0,window.scrollY))}))};if(h||"fade-in"===b)return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[b,d,h]);var E=0,C=0,O=0,B=0;if(c&&u&&a.current){var N=u.bottom,x=a.current.getBoundingClientRect().height;C=(E=u.top)+x,O=N-2*x,B=N-x}var S=0===y?-1:0,I=y,k=(0,L.q_)({bgSpring:Math.max(E,Math.min(C,f)),bg2Spring:Math.max(O,Math.min(B,f)),clientHeaderSpring:Math.max(S,Math.min(I,f)),tension:100}),M=k.bgSpring,P=k.bg2Spring,Z=k.clientHeaderSpring,D=M.interpolate({range:[E,C],output:[p.startingOpacity,p.endingOpacity]}),j=P.interpolate({range:[O,B],output:[0,1]}),A=Z.interpolate({range:[S,I],output:[0,1]}),R=h?{style:{opacity:D},ref:o}:{},F=h?{style:{opacity:j},ref:a}:{},W=null!==(e=null===(t=A.payload)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.value)&&void 0!==e?e:0,z="fade-in"===b?{style:{opacity:A,pointerEvents:W<=.15?"none":"initial"},ref:l}:{};return(0,T.useDebugValue)({bgProps:R,bg2Props:F,logoProps:z}),{bgProps:R,bg2Props:F,logoProps:z}}(),p=u.bgProps,h=u.bg2Props,N=u.logoProps,I=(0,P.QH)(),j=I.collisionSourceRef,W=I.hBoundary1Ref,U=I.hBoundary2Ref,K=I.hasCollision,Q=(0,O.wt)(),$=(0,T.useState)(n.forceVisibility),_=(0,r.Z)($,2),G=_[0],Y=_[1],J=(0,T.useState)(!1),X=(0,r.Z)(J,2),ee=X[0],te=X[1],ne=K||Q===O.tx.COMPACT,oe=ne&&!G&&!!n.title,re=(0,f.I)(),ae=(0,l.eu)().currentUser,ie=(0,l.$m)(ae.data),le=(0,v.d)(),se=(0,b.Lc)(),ce=(0,b.D1)(),ue=Q===O.tx.COMPACT&&n.hasSubNav,me=ne?!G&&T.createElement(V,null):T.createElement(q,null),ge=le.mobileLogo.justifyContent===F.p.CENTER,fe=le.logo.justifyContent===F.p.CENTER,de=(0,Z.v9)((function(e){return e.theme.forcedVariables})),pe=(0,T.useState)(!!de),be=(0,r.Z)(pe,2),ve=be[0],he=be[1];(0,T.useEffect)((function(){ve&&he(!1)}),[ve]);var ye=T.createElement(T.Fragment,null,T.createElement(w.H1,{className:se.container},T.createElement("div",{className:se.bgContainer},T.createElement(L.q.div,(0,o.Z)({},p,{className:k()(se.bg1,(0,a.Z)({},se.swoop,le.swoop.amount>0))})),!ve&&T.createElement(L.q.div,(0,o.Z)({},h,{className:k()(se.bg2,(0,a.Z)({},se.swoop,le.swoop.amount>0))}),le.colors.bgImage&&T.createElement("img",{src:le.colors.bgImage,className:se.bgImage,alt:"titleBarImage","aria-hidden":!0}),le.overlay&&T.createElement("div",{className:se.overlay}))),T.createElement(y.Z,{fullGutter:!0,gutterSpacing:c.gutterSpacing,maxWidth:c.maxWidth},T.createElement("div",{className:se.titleBarContainer},T.createElement("div",{className:k()(se.bar,{isHome:ue})},ne&&(n.useMobileBackButton?T.createElement(B.Z,{hideIfNoHistory:!0,className:se.leftFlexBasis,linkClassName:se.button}):T.createElement(C.Z,{className:"pageHeading-leftSpacer"})),!ne&&(!fe||!G)&&T.createElement(L.q.div,(0,o.Z)({className:k()(se.logoAnimationWrap)},N),T.createElement("span",{className:k()("logoAlignment",(t={},(0,a.Z)(t,se.logoCenterer,fe),(0,a.Z)(t,se.logoLeftAligned,!fe),t))},T.createElement(T.Fragment,null,T.createElement(R.p,{className:se.skipNav},(0,S.t)("Skip to content")),T.createElement(g.Z,{className:k()("titleBar-logoContainer",se.logoContainer),logoClassName:"titleBar-logo",logoType:x.n.DESKTOP,overwriteLogo:n.overwriteLogo})))),!ne&&!fe&&T.createElement("div",{ref:W,style:{width:1,height:1}}),!G&&!ne&&T.createElement(d.Z,{isCentered:"center"===le.navAlignment.alignment,containerRef:"center"!==le.navAlignment.alignment||fe?void 0:j,className:se.nav,linkClassName:se.topElement,afterNode:!ne&&fe&&T.createElement("div",{ref:U,style:{width:1,height:20}})}),ne&&T.createElement(T.Fragment,null,!G&&T.createElement(T.Fragment,null,T.createElement(s.ZP,{className:se.hamburger,extraNavTop:n.extraBurgerNavigation,showCloseIcon:!1}),ge&&T.createElement(C.Z,{actualSpacer:!0}),T.createElement("div",{className:k()(ge&&se.logoCenterer,ce.mobileLogo)},T.createElement(L.q.span,(0,o.Z)({className:se.logoAnimationWrap},N),T.createElement(g.Z,{className:se.logoContainer,logoClassName:"titleBar-logo",logoType:x.n.MOBILE,overwriteLogo:n.overwriteLogo}))))),!ne&&!fe&&T.createElement("div",{ref:U,style:{width:1,height:1}}),T.createElement(E.Z,{className:se.rightFlexBasis,condition:!!oe},!G&&T.createElement("div",{className:se.extraMeBoxIcons},H.extraMeBoxComponents.map((function(e,t){return T.createElement(e,{key:t})}))),T.createElement(m.Z,{className:k()(se.compactSearch,{isCentered:G}),focusOnMount:!0,placeholder:(0,S.t)("Search"),open:G,onSearchButtonClick:function(){D.p.preload(),Y(!0)},onCloseSearch:function(){Y(n.forceVisibility)},cancelButtonClassName:k()(se.topElement,se.searchCancel,(0,A.Z)().link),cancelContentClassName:"meBox-buttonContent",buttonClass:k()(se.button,(0,a.Z)({},se.buttonOffset,!ne&&ie)),showingSuggestions:ee,onOpenSuggestions:function(){return te(!0)},onCloseSuggestions:function(){return te(!1)},buttonContentClassName:k()(re.buttonContent,"meBox-buttonContent"),clearButtonClass:se.clearButtonClass,scope:n.scope?z({},n.scope):void 0,searchCloseOverwrites:z({source:"fromTitleBar"},le.stateColors),overwriteSearchBar:{compact:ne}}),me))))),T.createElement(R.f,null)),Ee=(0,w.bO)(),Ce=Ee.resetScrollOffset,we=Ee.setScrollOffset,Oe=Ee.offsetClass,Be=null!==n.container?n.container||document.getElementById("titleBar"):null;n.wrapperComponent&&(ye=T.createElement(n.wrapperComponent,null,ye));var Ne=k()("titleBar",se.root,n.className,(0,a.Z)({},se.isSticky,n.isFixed),Oe);return(0,T.useEffect)((function(){return we((0,v.d)().sizing.height),null==Be||Be.setAttribute("class",Ne),function(){Ce()}}),[we,Ce,Be,Ne]),Be?M.createPortal(ye,Be):T.createElement("header",{className:Ne},ye)}function q(){var e=(0,b.Lc)(),t=(0,l.eu)().currentUser,n=(0,l.$m)(t.data),o=(0,j.FS)(),r=(0,j.QN)(),a=(0,v.d)().guest;return n?T.createElement("div",{className:k()("titleBar-nav titleBar-guestNav",e.nav)},T.createElement(p.v,{buttonType:a.signInButtonType,linkClassName:k()(e.signIn,e.guestButton),to:r},(0,S.t)("Sign In")),o&&T.createElement(p.v,{buttonType:a.registerButtonType,linkClassName:k()(e.register,e.guestButton),to:o},(0,S.t)("Register"))):T.createElement(c.Z,{currentUser:t,className:k()("titleBar-meBox",e.meBox),buttonClassName:e.button,contentClassName:k()("titleBar-dropDownContents",e.dropDownContents)})}function V(){var e=(0,l.eu)().currentUser,t=(0,l.$m)(e.data),n=(0,b.Lc)(),o=(0,j.QN)();return t?T.createElement(N.Z,{className:k()(n.centeredButton,n.button,n.signInIconOffset),title:(0,S.t)("Sign In"),to:o},T.createElement(h.Icon,{icon:"me-sign-in"})):T.createElement(u.Z,{className:k()("titleBar-button",n.button),currentUser:e})}H.extraMeBoxComponents=[],H.registerBeforeMeBox=function(e){H.extraMeBoxComponents.pop(),H.extraMeBoxComponents.push(e)}},80522:function(e,t,n){"use strict";n.d(t,{d:function(){return h}});var o=n(96156),r=n(19459),a=n(41033),i=n(92366),l=n(10389),s=n(46457),c=n(71055),u=n(13901),m=n(35138),g=n(85819),f=n(1109),d=n(43498),p=n(21058);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(0,m.yI)((function(e){var t=(0,a.OF)(e),n=(0,r.Gv)(e),o=(0,u.Cg)("titleBar",e),m=o("sizing",{height:48,spacer:12,mobile:{height:44,width:n.sizing.height}}),b=o("spacing",{padding:s.L.spacing({top:0,bottom:0})}),h=o("overlay",{background:void 0}),y=o("colors",{fg:t.mainColors.primaryContrast,bg:t.mainColors.primary,bgImage:null}),E=o("colors",v(v({},y),{},{state:{bg:c.w.isLightColor(y.bg)?(0,g.m4)(0,0,0,.1):(0,g.m4)(255,255,255,.1),fg:y.fg}})),C=o("mobileColors",E),w=o("border",{type:i.BorderType.NONE,color:t.border.color,width:t.border.width}),O=(0,u.oT)(m.height)+(0,u.oT)(b.padding.bottom)+(0,u.oT)(b.padding.top)+(w.type==i.BorderType.SHADOW_AS_BORDER?(0,u.oT)(w.width):0),B=o("swoop",{amount:0}),N=o("swoop",v(v({},B),{},{swoopOffset:16*B.amount/50})),x=o("fullBleed",{enabled:!1,startingOpacity:0,endingOpacity:.15,bgColor:E.bg}),S={type:i.BorderType.NONE,color:"transparent",width:(0,l.dd)(0),radius:(0,l.dd)(0)},I=o("titleBarContainer",{maxWidth:void 0,gutterSpacing:s.L.spacing({}),border:s.L.border({left:v({},S),right:v({},S),top:v({},S),bottom:v({},S)})});x.endingOpacity=Math.max(x.startingOpacity,x.endingOpacity);var k=o("guest",{spacer:8,signInButtonType:d.q.TRANSPARENT,registerButtonType:d.q.TRANSLUCID}),T=t.buttonIcon.size,M=o("button",{borderRadius:t.border.radius,size:T,guest:{minWidth:86},mobile:{fontSize:16,width:T},state:{bg:E.state.bg}}),L=o("generatedColors",{state:c.w.offsetLightness(E.bg,.04)}),P=o("linkButton",s.L.button({name:d.q.TITLEBAR_LINK,colors:{bg:(0,g.m4)(0,0,0,0),fg:E.fg},fonts:s.L.font({color:E.fg}),sizing:{minWidth:(0,l.dd)(t.icon.sizes.large),minHeight:(0,l.dd)(t.icon.sizes.large)},padding:{horizontal:6},borders:{style:"none",color:(0,g.m4)(0,0,0,0)},hover:{colors:{bg:L.state}},focus:{colors:{bg:L.state}},focusAccessible:{colors:{bg:L.state}},active:{colors:{bg:L.state}}})),Z=o("count",{size:18,fontSize:10,fg:t.mainColors.bg,bg:t.mainColors.primary}),D=o("dropDownContents",{minWidth:350,maxHeight:(0,g.sI)(90)}),j=o("endElements",{flexBasis:4*T,mobile:{flexBasis:M.mobile.width-20}}),A=o("buttonContents",{state:{bg:M.state.bg}}),R=o("signIn",{fg:E.fg,bg:c.w.modifyColorBasedOnLightness({color:t.mainColors.primary,weight:.1,inverse:!0}),border:v({},s.L.border({color:E.fg})),hover:{bg:c.w.modifyColorBasedOnLightness({color:t.mainColors.primary,weight:.2,inverse:!0})}}),F=o("register",{fg:E.bg,bg:E.fg,borderColor:E.bg,states:{bg:E.fg.fade(.9)}}),W=o("mobileDropdown",{height:(0,g.px)(m.mobile.height)}),z=o("meBox",{sizing:{buttonContents:n.sizing.height}}),H=o("logo",{doubleLogoStrategy:"visible",offsetRight:t.gutter.size,justifyContent:p.p.LEFT,maxHeight:void 0,maxWidth:200,heightOffset:m.height/3,tablet:{},desktop:{url:void 0},mobile:{url:void 0,maxWidth:void 0,maxHeight:void 0,heightOffset:m.mobile.height/4},offsetVertical:{amount:0,mobile:{amount:0}}}),q=o("navAlignment",{alignment:"left"});H.justifyContent===p.p.CENTER&&(q.alignment="left");var V=o("mobileLogo",{justifyContent:p.p.CENTER}),U=o("breakpoints",{compact:800}),K=o("closeButtonInit",{allStates:E.fg,hoverOpacity:t.constants.states.hover.borderEmphasis}),Q=o("stateColors",{hover:K.allStates.mix(y.bg,K.hoverOpacity),focus:K.allStates,active:K.allStates});return{fullBleed:x,titleBarContainer:I,border:w,sizing:m,colors:E,mobileColors:C,overlay:h,signIn:R,resister:F,guest:k,button:M,linkButton:P,count:Z,dropDownContents:D,endElements:j,buttonContents:A,mobileDropDown:W,meBox:z,logo:H,mediaQueries:function(){return{full:function(e){return(0,f.BC)({minWidth:U.compact+1},e)},compact:function(e){return(0,f.BC)({maxWidth:U.compact},e)}}},breakpoints:U,navAlignment:q,mobileLogo:V,spacing:b,swoop:N,fullHeight:O,stateColors:Q}}))},65955:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var o=n(3172),r=n(67294),a=n(16550);function i(e){return r.createElement(a.VA,null,r.createElement(o.Z,{useMobileBackButton:!1}))}},18814:function(e,t,n){"use strict";n.d(t,{t:function(){return S}});var o=n(28481),r=n(67294),a=n(96156),i=n(67920),l=n(41033),s=n(71055),c=n(10389),u=n(13901),m=n(35138),g=n(46457),f=n(52093),d=n(97133);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=(0,m.yI)((function(e){var t=(0,l.OF)(),n=(0,u.Cg)("titleBarMegaMenu",e,[new f.b({"item.spacer":"spacing.menuItemSpacer","item.font.color":"colors.fg","wrapper.background.color":"colors.bg"})]),o=n("item",{spacer:10,font:g.L.font({size:14,color:t.mainColors.fg})});return{title:n("title",{font:g.L.font(b(b({},t.fontSizeAndWeightVars("medium","bold")),{},{color:o.font.color,lineHeight:1.25}))}),wrapper:n("wrapper",{shadow:"0 5px 5px 0 ".concat(s.w.colorOut(t.elementaryColors.black.fade(.3))),background:g.L.background({color:t.mainColors.bg})}),item:o}})),h=(0,m.yI)((function(){var e=(0,l.OF)(),t=v(),n=(0,d.iv)(b(b({position:"fixed",left:0,right:0},i.W.background(t.wrapper.background)),{},{boxShadow:t.wrapper.shadow,overflow:"hidden",transition:"height 200ms"}),";label:TitleBarMegaMenu-styles-wrapper;"),o=(0,d.iv)({"&&":{overflowY:"auto",maxHeight:"60vh",display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:20}},";label:TitleBarMegaMenu-styles-container;");return{wrapper:n,menuItem:(0,d.iv)(b({minWidth:160,maxWidth:300},i.W.padding({horizontal:t.item.spacer,top:20})),";label:TitleBarMegaMenu-styles-menuItem;"),menuItemChildren:(0,d.iv)({name:"hydpy4-TitleBarMegaMenu-styles-menuItemChildren",styles:";label:TitleBarMegaMenu-styles-menuItemChildren;"}),fillerItem:(0,d.iv)({name:"1r7tkh4-TitleBarMegaMenu-styles-fillerItem",styles:"flex:1;flex-basis:160px;label:TitleBarMegaMenu-styles-fillerItem;"}),container:o,menuItemTitle:(0,d.iv)(b(b({display:"block"},i.W.font(t.title.font)),{},{marginBottom:(0,c.dd)(12)}),";label:TitleBarMegaMenu-styles-menuItemTitle;"),menuItemChild:(0,d.iv)({fontSize:(0,c.dd)(14),lineHeight:1.25,listStyle:"none",marginBottom:(0,c.dd)(12),"&:last-child":{marginBottom:0},"& a":b({},i.W.font(t.item.font)),"& a:hover":{color:s.w.colorOut(e.links.colors.hover)}},";label:TitleBarMegaMenu-styles-menuItemChild;")}})),y=n(77798),E=n(4494),C=n(98119),w=n(94370),O=n(93266);function B(e,t){var n=e.className,o=e.url,a=e.text,i=e.onKeyDown;return r.createElement("li",{className:n},r.createElement(O.Z,{tabIndex:0,onKeyDown:i,to:o},a))}function N(e,t){var n,a,i,l=e.expanded,s=e.leftOffset,c=void 0===s?0:s,u=e.onClose,m=e.menuItem,g=h(),f=(0,y.bO)().getCalcedHashOffset,d=(0,r.useState)(!1),p=(0,o.Z)(d,2),b=p[0],v=p[1],O=(0,r.useState)(!1),B=(0,o.Z)(O,2),N=B[0],S=B[1],I=(0,r.useState)(!1),k=(0,o.Z)(I,2),T=k[0],M=k[1],L=(0,r.useState)(!0),P=(0,o.Z)(L,2),Z=P[0],D=P[1],j=(0,r.useRef)(u),A=l&&(null===(n=l.children)||void 0===n?void 0:n.length),R=b||N,F=(0,r.useRef)(null),W=(0,C.xE)(F,!1,!0),z=W.height,H=f()+z,q=[];null==l||null===(a=l.children)||void 0===a||a.map((function(e){var t;null!==(t=e.children)&&void 0!==t&&t.length||q.push(e)})),(0,r.useEffect)((function(){j.current=u}),[u]),(0,r.useEffect)((function(){if(!A){var e=setTimeout((function(){D(!0)}),200);return function(){return clearTimeout(e)}}D(!1)}),[A]),(0,r.useImperativeHandle)(t,(function(){return{focusFirstItem:function(){M(!0)}}}));var V=(0,r.useCallback)((function(){if(T){var e,t=null===(e=F.current)||void 0===e?void 0:e.querySelector(".".concat(g.menuItemChild," a"));t&&(null==t||t.focus(),M(!1))}}),[T,g.menuItemChild]);function U(e){return r.createElement("ul",{className:g.menuItemChildren},e.map((function(e,t){return r.createElement(x,{className:g.menuItemChild,url:e.url,text:e.name,key:t,onKeyDown:function(e){return function(e){if(null!==F.current&&null!==document.activeElement){var t=new w.yE(F.current),n=e.target,o=t.getNext(n,!1,!1),r=t.getNext(n,!0,!1),a=n.closest('div[class^="titleBarMegaMenu-menuItem"]'),i=null==a?void 0:a.nextSibling,l=null==a?void 0:a.previousSibling;switch(e.key){case"Escape":e.preventDefault(),null==m||m.focus(),S(!1);break;case"ArrowDown":e.preventDefault(),null==o||o.focus(),S(!1);break;case"ArrowUp":e.preventDefault(),r?null==r||r.focus():null==m||m.focus();break;case"ArrowRight":if(!i)return;var s=i.querySelector("li a");null==s||s.focus();break;case"ArrowLeft":if(!l)return;var c=l.querySelector("li a");null==c||c.focus();break;case" ":e.preventDefault(),e.target.click()}}}(e)}})})))}return(0,r.useLayoutEffect)((function(){V()}),[V]),(0,r.useEffect)((function(){if(!R){var e=j.current,t=setTimeout((function(){e&&e()}),250);return function(){return clearTimeout(t)}}}),[R]),(0,r.useEffect)((function(){function e(e){S(e.clientY<=H)}return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[H]),(0,r.useEffect)((function(){S(!1)}),[l]),r.createElement("div",{className:g.wrapper,style:{top:f(),height:A?z:0,display:Z?"none":void 0},onFocus:function(){return v(!0)},onBlur:function(){return v(!1)}},r.createElement(E.Z,{ref:function(e){F.current=e,V()},style:{paddingLeft:c-W.left},className:g.container,ignoreContext:!0,fullGutter:!0},null==l||null===(i=l.children)||void 0===i?void 0:i.map((function(e,t){var n;return null!==(n=e.children)&&void 0!==n&&n.length?r.createElement("div",{key:t,className:g.menuItem},r.createElement("span",{className:g.menuItemTitle},e.name),e.children&&U(e.children)):r.createElement(r.Fragment,{key:t})})),q.length?r.createElement("div",{className:g.menuItem},U(q)):r.createElement(r.Fragment,null)))}var x=r.forwardRef(B),S=r.forwardRef(N)}}]);